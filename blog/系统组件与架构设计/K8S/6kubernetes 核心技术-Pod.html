<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>核心技术-Pod | 一名GO+PHP工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e16ad0a6.css" as="style"><link rel="preload" href="/blog/assets/js/app.4d60979a.js" as="script"><link rel="preload" href="/blog/assets/js/3.64b046d0.js" as="script"><link rel="preload" href="/blog/assets/js/43.d3b62f61.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.9e6787ec.js"><link rel="prefetch" href="/blog/assets/js/100.056ffb3b.js"><link rel="prefetch" href="/blog/assets/js/101.621565b8.js"><link rel="prefetch" href="/blog/assets/js/102.e7ddf77c.js"><link rel="prefetch" href="/blog/assets/js/103.0ede41cb.js"><link rel="prefetch" href="/blog/assets/js/104.7911c85c.js"><link rel="prefetch" href="/blog/assets/js/105.bd8846c4.js"><link rel="prefetch" href="/blog/assets/js/106.f8e8e430.js"><link rel="prefetch" href="/blog/assets/js/107.8c51e30a.js"><link rel="prefetch" href="/blog/assets/js/108.442ee20a.js"><link rel="prefetch" href="/blog/assets/js/109.b145eda9.js"><link rel="prefetch" href="/blog/assets/js/11.8c425353.js"><link rel="prefetch" href="/blog/assets/js/110.10aafd35.js"><link rel="prefetch" href="/blog/assets/js/111.3cf1f8f1.js"><link rel="prefetch" href="/blog/assets/js/112.5798b1a1.js"><link rel="prefetch" href="/blog/assets/js/113.a97ed996.js"><link rel="prefetch" href="/blog/assets/js/114.cb641292.js"><link rel="prefetch" href="/blog/assets/js/115.e46888d2.js"><link rel="prefetch" href="/blog/assets/js/116.878e5be8.js"><link rel="prefetch" href="/blog/assets/js/117.21198ead.js"><link rel="prefetch" href="/blog/assets/js/118.f1a06403.js"><link rel="prefetch" href="/blog/assets/js/119.62c4cafa.js"><link rel="prefetch" href="/blog/assets/js/12.c80ac351.js"><link rel="prefetch" href="/blog/assets/js/120.3a2ddb87.js"><link rel="prefetch" href="/blog/assets/js/121.56a24085.js"><link rel="prefetch" href="/blog/assets/js/122.1585235d.js"><link rel="prefetch" href="/blog/assets/js/123.f501fffc.js"><link rel="prefetch" href="/blog/assets/js/124.7403ec7e.js"><link rel="prefetch" href="/blog/assets/js/125.770ca9d6.js"><link rel="prefetch" href="/blog/assets/js/126.d8607284.js"><link rel="prefetch" href="/blog/assets/js/127.e7d63512.js"><link rel="prefetch" href="/blog/assets/js/128.de8011f3.js"><link rel="prefetch" href="/blog/assets/js/129.f4075b49.js"><link rel="prefetch" href="/blog/assets/js/13.3b04e98b.js"><link rel="prefetch" href="/blog/assets/js/130.18b6488c.js"><link rel="prefetch" href="/blog/assets/js/131.dc659172.js"><link rel="prefetch" href="/blog/assets/js/132.bbd56ade.js"><link rel="prefetch" href="/blog/assets/js/133.25f1a7e7.js"><link rel="prefetch" href="/blog/assets/js/134.beb459f9.js"><link rel="prefetch" href="/blog/assets/js/135.e1df2f28.js"><link rel="prefetch" href="/blog/assets/js/136.9e705411.js"><link rel="prefetch" href="/blog/assets/js/137.745f3187.js"><link rel="prefetch" href="/blog/assets/js/138.a894c051.js"><link rel="prefetch" href="/blog/assets/js/139.4fea8c7c.js"><link rel="prefetch" href="/blog/assets/js/14.a96b8c6c.js"><link rel="prefetch" href="/blog/assets/js/140.da5db673.js"><link rel="prefetch" href="/blog/assets/js/141.ce1ae60f.js"><link rel="prefetch" href="/blog/assets/js/142.7b3a73dc.js"><link rel="prefetch" href="/blog/assets/js/143.6ac22864.js"><link rel="prefetch" href="/blog/assets/js/144.3f487824.js"><link rel="prefetch" href="/blog/assets/js/145.97671b84.js"><link rel="prefetch" href="/blog/assets/js/146.3759cf9f.js"><link rel="prefetch" href="/blog/assets/js/147.41e0eac3.js"><link rel="prefetch" href="/blog/assets/js/148.a02ac609.js"><link rel="prefetch" href="/blog/assets/js/149.89f3b78d.js"><link rel="prefetch" href="/blog/assets/js/15.f08be4b3.js"><link rel="prefetch" href="/blog/assets/js/150.286e207e.js"><link rel="prefetch" href="/blog/assets/js/151.4fd49e2d.js"><link rel="prefetch" href="/blog/assets/js/152.f6b01ae5.js"><link rel="prefetch" href="/blog/assets/js/153.5f760eb0.js"><link rel="prefetch" href="/blog/assets/js/154.f8478264.js"><link rel="prefetch" href="/blog/assets/js/155.7c03923e.js"><link rel="prefetch" href="/blog/assets/js/156.649172ef.js"><link rel="prefetch" href="/blog/assets/js/157.db021179.js"><link rel="prefetch" href="/blog/assets/js/158.743531b1.js"><link rel="prefetch" href="/blog/assets/js/159.317d12fa.js"><link rel="prefetch" href="/blog/assets/js/16.89eaed28.js"><link rel="prefetch" href="/blog/assets/js/160.12019f22.js"><link rel="prefetch" href="/blog/assets/js/161.fcfee7ab.js"><link rel="prefetch" href="/blog/assets/js/162.c9658dcc.js"><link rel="prefetch" href="/blog/assets/js/163.3dae169a.js"><link rel="prefetch" href="/blog/assets/js/164.505c55e3.js"><link rel="prefetch" href="/blog/assets/js/165.63a7b070.js"><link rel="prefetch" href="/blog/assets/js/166.e3548c5c.js"><link rel="prefetch" href="/blog/assets/js/167.eb3e0529.js"><link rel="prefetch" href="/blog/assets/js/168.195c2899.js"><link rel="prefetch" href="/blog/assets/js/169.01d6ef72.js"><link rel="prefetch" href="/blog/assets/js/17.b2ecb0d6.js"><link rel="prefetch" href="/blog/assets/js/170.7af88887.js"><link rel="prefetch" href="/blog/assets/js/171.594e54cd.js"><link rel="prefetch" href="/blog/assets/js/172.30595b1c.js"><link rel="prefetch" href="/blog/assets/js/173.37c33aff.js"><link rel="prefetch" href="/blog/assets/js/174.f8ee4785.js"><link rel="prefetch" href="/blog/assets/js/175.4858b4b8.js"><link rel="prefetch" href="/blog/assets/js/176.0254a415.js"><link rel="prefetch" href="/blog/assets/js/177.5bebb88a.js"><link rel="prefetch" href="/blog/assets/js/178.1c924293.js"><link rel="prefetch" href="/blog/assets/js/179.7bd03a01.js"><link rel="prefetch" href="/blog/assets/js/18.3f2efd75.js"><link rel="prefetch" href="/blog/assets/js/180.6be40a39.js"><link rel="prefetch" href="/blog/assets/js/181.c1f6eaa5.js"><link rel="prefetch" href="/blog/assets/js/182.565dfa75.js"><link rel="prefetch" href="/blog/assets/js/183.587bc5a9.js"><link rel="prefetch" href="/blog/assets/js/184.0ad4a9d3.js"><link rel="prefetch" href="/blog/assets/js/19.2265afd3.js"><link rel="prefetch" href="/blog/assets/js/2.344d48c9.js"><link rel="prefetch" href="/blog/assets/js/20.b0737623.js"><link rel="prefetch" href="/blog/assets/js/21.f99e8b44.js"><link rel="prefetch" href="/blog/assets/js/22.ada982b0.js"><link rel="prefetch" href="/blog/assets/js/23.7a2e8419.js"><link rel="prefetch" href="/blog/assets/js/24.ecb72dfd.js"><link rel="prefetch" href="/blog/assets/js/25.9fcdfa9e.js"><link rel="prefetch" href="/blog/assets/js/26.4089a9a5.js"><link rel="prefetch" href="/blog/assets/js/27.2b503aa6.js"><link rel="prefetch" href="/blog/assets/js/28.25a596a9.js"><link rel="prefetch" href="/blog/assets/js/29.0bae5dc3.js"><link rel="prefetch" href="/blog/assets/js/30.bf188ae3.js"><link rel="prefetch" href="/blog/assets/js/31.64cdc230.js"><link rel="prefetch" href="/blog/assets/js/32.666cd74a.js"><link rel="prefetch" href="/blog/assets/js/33.c9f02fd4.js"><link rel="prefetch" href="/blog/assets/js/34.0787da98.js"><link rel="prefetch" href="/blog/assets/js/35.69be40e1.js"><link rel="prefetch" href="/blog/assets/js/36.967e65fc.js"><link rel="prefetch" href="/blog/assets/js/37.c4eed72d.js"><link rel="prefetch" href="/blog/assets/js/38.b5a162e9.js"><link rel="prefetch" href="/blog/assets/js/39.d012b075.js"><link rel="prefetch" href="/blog/assets/js/4.d36f8686.js"><link rel="prefetch" href="/blog/assets/js/40.aff2fd07.js"><link rel="prefetch" href="/blog/assets/js/41.467398e0.js"><link rel="prefetch" href="/blog/assets/js/42.edd4b50d.js"><link rel="prefetch" href="/blog/assets/js/44.78a53322.js"><link rel="prefetch" href="/blog/assets/js/45.e42c778b.js"><link rel="prefetch" href="/blog/assets/js/46.6e7f12a8.js"><link rel="prefetch" href="/blog/assets/js/47.8051b696.js"><link rel="prefetch" href="/blog/assets/js/48.5e59306f.js"><link rel="prefetch" href="/blog/assets/js/49.aa379e48.js"><link rel="prefetch" href="/blog/assets/js/5.b632bd43.js"><link rel="prefetch" href="/blog/assets/js/50.10849ea7.js"><link rel="prefetch" href="/blog/assets/js/51.29fb5c68.js"><link rel="prefetch" href="/blog/assets/js/52.c183fd4d.js"><link rel="prefetch" href="/blog/assets/js/53.dba94649.js"><link rel="prefetch" href="/blog/assets/js/54.4a5a213f.js"><link rel="prefetch" href="/blog/assets/js/55.cc704ccd.js"><link rel="prefetch" href="/blog/assets/js/56.3fe2e810.js"><link rel="prefetch" href="/blog/assets/js/57.d896ecfa.js"><link rel="prefetch" href="/blog/assets/js/58.9688b6f5.js"><link rel="prefetch" href="/blog/assets/js/59.5197c3c3.js"><link rel="prefetch" href="/blog/assets/js/6.8a66f577.js"><link rel="prefetch" href="/blog/assets/js/60.d90c84e2.js"><link rel="prefetch" href="/blog/assets/js/61.585c2c2c.js"><link rel="prefetch" href="/blog/assets/js/62.407dc6a9.js"><link rel="prefetch" href="/blog/assets/js/63.f123b031.js"><link rel="prefetch" href="/blog/assets/js/64.76ecb921.js"><link rel="prefetch" href="/blog/assets/js/65.df76bad4.js"><link rel="prefetch" href="/blog/assets/js/66.5bdf7b82.js"><link rel="prefetch" href="/blog/assets/js/67.848527fb.js"><link rel="prefetch" href="/blog/assets/js/68.7d6ee143.js"><link rel="prefetch" href="/blog/assets/js/69.b1b1948f.js"><link rel="prefetch" href="/blog/assets/js/7.1faf412a.js"><link rel="prefetch" href="/blog/assets/js/70.281f82e9.js"><link rel="prefetch" href="/blog/assets/js/71.c2421361.js"><link rel="prefetch" href="/blog/assets/js/72.49706859.js"><link rel="prefetch" href="/blog/assets/js/73.0bae8805.js"><link rel="prefetch" href="/blog/assets/js/74.4a54f7b3.js"><link rel="prefetch" href="/blog/assets/js/75.b78e13e6.js"><link rel="prefetch" href="/blog/assets/js/76.f75cbb65.js"><link rel="prefetch" href="/blog/assets/js/77.9f39bc39.js"><link rel="prefetch" href="/blog/assets/js/78.2f3e606b.js"><link rel="prefetch" href="/blog/assets/js/79.34c3df65.js"><link rel="prefetch" href="/blog/assets/js/8.9e15b5fd.js"><link rel="prefetch" href="/blog/assets/js/80.6dd42b30.js"><link rel="prefetch" href="/blog/assets/js/81.b1de0e50.js"><link rel="prefetch" href="/blog/assets/js/82.72a043ee.js"><link rel="prefetch" href="/blog/assets/js/83.218b78b0.js"><link rel="prefetch" href="/blog/assets/js/84.89adc897.js"><link rel="prefetch" href="/blog/assets/js/85.c5bc3a64.js"><link rel="prefetch" href="/blog/assets/js/86.52e2e4c8.js"><link rel="prefetch" href="/blog/assets/js/87.fcd18628.js"><link rel="prefetch" href="/blog/assets/js/88.4b136e7f.js"><link rel="prefetch" href="/blog/assets/js/89.77f04e86.js"><link rel="prefetch" href="/blog/assets/js/9.3c88ce8e.js"><link rel="prefetch" href="/blog/assets/js/90.2e4e24f9.js"><link rel="prefetch" href="/blog/assets/js/91.a474434d.js"><link rel="prefetch" href="/blog/assets/js/92.781278fb.js"><link rel="prefetch" href="/blog/assets/js/93.37936542.js"><link rel="prefetch" href="/blog/assets/js/94.a6a7c7eb.js"><link rel="prefetch" href="/blog/assets/js/95.a137b98d.js"><link rel="prefetch" href="/blog/assets/js/96.19973436.js"><link rel="prefetch" href="/blog/assets/js/97.0a52a8f1.js"><link rel="prefetch" href="/blog/assets/js/98.6f4fc675.js"><link rel="prefetch" href="/blog/assets/js/99.644ed71b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e16ad0a6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名GO+PHP工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/系统组件与架构设计/K8S/1kubernetes 概述" class="sidebar-heading clickable open"><span>K8S</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/系统组件与架构设计/K8S/1kubernetes 概述.html" class="sidebar-link">概述</a></li><li><a href="/blog/系统组件与架构设计/K8S/2kubernetes 集群搭建-kubeadm方式 .html" class="sidebar-link">集群搭建(kubeadm 方式)</a></li><li><a href="/blog/系统组件与架构设计/K8S/4kubernetes 集群 YAML 文件详解.html" class="sidebar-link">集群 YAML 文件详解</a></li><li><a href="/blog/系统组件与架构设计/K8S/5kubernetes 集群命令行工具 kubectl.html" class="sidebar-link">集群命令行工具 kubectl</a></li><li><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html" class="active sidebar-link">核心技术-Pod</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-概述" class="sidebar-link">Pod 概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-vs-应用" class="sidebar-link">Pod vs 应用</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-vs-容器" class="sidebar-link">Pod vs 容器</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-vs-节点" class="sidebar-link">Pod vs 节点</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-vs-pod" class="sidebar-link">Pod vs Pod</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-特性" class="sidebar-link">Pod 特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#资源共享" class="sidebar-link">资源共享</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#生命周期短暂" class="sidebar-link">生命周期短暂</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#平坦的网络" class="sidebar-link">平坦的网络</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-定义" class="sidebar-link">Pod 定义</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-的基本使用方法" class="sidebar-link">Pod 的基本使用方法</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-的分类" class="sidebar-link">Pod 的分类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#普通-pod" class="sidebar-link">普通 Pod</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#静态-pod" class="sidebar-link">静态 Pod</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-生命周期和重启策略" class="sidebar-link">Pod 生命周期和重启策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-的状态" class="sidebar-link">Pod 的状态</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-重启策略" class="sidebar-link">Pod 重启策略</a></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#常见状态转换" class="sidebar-link">常见状态转换</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#pod-资源配置" class="sidebar-link">Pod 资源配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/系统组件与架构设计/K8S/6kubernetes 核心技术-Pod.html#举例" class="sidebar-link">举例</a></li></ul></li></ul></li><li><a href="/blog/系统组件与架构设计/K8S/7kubernetes 核心技术-Label.html" class="sidebar-link">核心技术-Label</a></li><li><a href="/blog/系统组件与架构设计/K8S/8kubernetes 核心技术-Controller 控制器.html" class="sidebar-link">核心技术-Controller 控制器</a></li><li><a href="/blog/系统组件与架构设计/K8S/9kubernetes 核心技术-Volume.html" class="sidebar-link">核心技术-Volume</a></li><li><a href="/blog/系统组件与架构设计/K8S/10 kubernetes 核心技术-PVC 和 PV.html" class="sidebar-link">核心技术-PVC 和 PV</a></li><li><a href="/blog/系统组件与架构设计/K8S/11kubernetes 核心技术-Secret.html" class="sidebar-link">核心技术-Secret</a></li><li><a href="/blog/系统组件与架构设计/K8S/12kubernetes 核心技术-configMap.html" class="sidebar-link">核心技术-configMap</a></li><li><a href="/blog/系统组件与架构设计/K8S/13kubernetes 核心技术-Namespace.html" class="sidebar-link">核心技术-Namespace</a></li><li><a href="/blog/系统组件与架构设计/K8S/14kubernetes 核心技术-Service.html" class="sidebar-link">核心技术-Service</a></li><li><a href="/blog/系统组件与架构设计/K8S/18kubernetes 核心技术-探针.html" class="sidebar-link">核心技术-探针</a></li><li><a href="/blog/系统组件与架构设计/K8S/19kubernetes 核心技术-调度器.html" class="sidebar-link">核心技术-调度器</a></li><li><a href="/blog/系统组件与架构设计/K8S/20kubernetes 核心技术-集群安全机制 RBAC.html" class="sidebar-link">核心技术-集群安全机制 RBAC</a></li><li><a href="/blog/系统组件与架构设计/K8S/22kubernetes 核心技术-Helm.html" class="sidebar-link">核心技术-Helm</a></li><li><a href="/blog/系统组件与架构设计/K8S/23kubernetes 高可用集群搭建.html" class="sidebar-link">高可用集群搭建</a></li><li><a href="/blog/系统组件与架构设计/K8S/24kubernetes 部署项目.html" class="sidebar-link">部署项目</a></li><li><a href="/blog/系统组件与架构设计/K8S/25kubernetes-部署性能监控平台.html" class="sidebar-link">部署性能监控平台</a></li><li><a href="/blog/系统组件与架构设计/K8S/Web界面Dashboard.html" class="sidebar-link">Web界面Dashboard</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="核心技术-pod"><a href="#核心技术-pod" class="header-anchor">#</a> 核心技术-Pod</h1> <h2 id="pod-概述"><a href="#pod-概述" class="header-anchor">#</a> Pod 概述</h2> <p>Pod 是 k8s 系统中可以创建和管理的最小单元，是资源对象模型中由用户创建或部署的最小资源对象模型，也是在 k8s 上运行容器化应用的资源对象，其他的资源对象都是用来支撑或者扩展 Pod 对象功能的，比如控制器对象是用来管控 Pod 对象的，Service 或者Ingress 资源对象是用来暴露 Pod 引用对象的，PersistentVolume 资源对象是用来为 Pod提供存储等等，k8s 不会直接处理容器，而是 Pod，Pod 是由一个或多个 container 组成Pod 是 Kubernetes 的最重要概念，每一个 Pod 都有一个特殊的被称为”根容器“的 Pause容器。Pause 容器对应的镜 像属于 Kubernetes 平台的一部分，除了 Pause 容器，每个 Pod 还包含一个或多个紧密相关的用户业务容器</p> <p><img src="/blog/assets/img/2021-04-22-16-43-16.4530f148.png" alt=""></p> <p><img src="/blog/assets/img/2021-04-22-16-43-29.1d2e8110.png" alt=""></p> <h3 id="pod-vs-应用"><a href="#pod-vs-应用" class="header-anchor">#</a> Pod vs 应用</h3> <p>每个 Pod 都是应用的一个实例，有专用的 IP</p> <h3 id="pod-vs-容器"><a href="#pod-vs-容器" class="header-anchor">#</a> Pod vs 容器</h3> <p>一个 Pod 可以有多个容器，彼此间共享网络和存储资源，每个 Pod 中有一个 Pause 容器保存所有的容器状态， 通过管理 pause 容器，达到管理 pod 中所有容器的效果</p> <h3 id="pod-vs-节点"><a href="#pod-vs-节点" class="header-anchor">#</a> Pod vs 节点</h3> <p>同一个 Pod 中的容器总会被调度到相同 Node 节点，不同节点间 Pod 的通信基于虚拟二层网络技术实现</p> <h3 id="pod-vs-pod"><a href="#pod-vs-pod" class="header-anchor">#</a> Pod vs Pod</h3> <p>普通的 Pod 和静态 Pod</p> <h2 id="pod-特性"><a href="#pod-特性" class="header-anchor">#</a> Pod 特性</h2> <h3 id="资源共享"><a href="#资源共享" class="header-anchor">#</a> 资源共享</h3> <p>一个 Pod 里的多个容器可以共享存储和网络，可以看作一个逻辑的主机。共享的如 namespace, cgroups 或者其他的隔离资源。</p> <p>多个容器共享同一 network namespace，由此在一个 Pod 里的多个容器共享 Pod 的 IP 和 端口 namespace，所以一个 Pod 内的多个容器之间可以通过 localhost 来进行通信, 所需要</p> <p>注意的是不同容器要注意不要有端口冲突即可。不同的 Pod 有不同的 IP, 不同 Pod 内的多个容器之前通信，不可以使用 IPC（如果没有特殊指定的话）通信，通常情况下使用 Pod 的 IP 进行通信。</p> <p>一个 Pod 里的多个容器可以共享存储卷，这个存储卷会被定义为 Pod 的一部分，并且可以挂载到该 Pod 里的所有容器的文件系统上。</p> <h3 id="生命周期短暂"><a href="#生命周期短暂" class="header-anchor">#</a> 生命周期短暂</h3> <p>Pod 属于生命周期比较短暂的组件，比如，当 Pod 所在节点发生故障，那么该节点上的 Pod 会被调度到其他节点，但需要注意的是，被重新调度的 Pod 是一个全新的 Pod, 跟之前的Pod 没有半毛钱关系。</p> <h3 id="平坦的网络"><a href="#平坦的网络" class="header-anchor">#</a> 平坦的网络</h3> <p>K8s 集群中的所有 Pod 都在同一个共享网络地址空间中，也就是说每个 Pod 都可以通过其他 Pod 的 IP 地址来实现访问。</p> <h2 id="pod-定义"><a href="#pod-定义" class="header-anchor">#</a> Pod 定义</h2> <p>（1）下面是 yaml 文件定义的 Pod 的完整内容</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span> //元数据
<span class="token key atrule">name</span><span class="token punctuation">:</span> string
<span class="token key atrule">namespace</span><span class="token punctuation">:</span> string
<span class="token key atrule">labels</span><span class="token punctuation">:</span>

  <span class="token key atrule">+ name</span><span class="token punctuation">:</span> string

<span class="token key atrule">annotations</span><span class="token punctuation">:</span>

  <span class="token key atrule">+ name</span><span class="token punctuation">:</span> string

<span class="token key atrule">spec</span><span class="token punctuation">:</span>
<span class="token key atrule">containers</span><span class="token punctuation">:</span> //pod 中的容器列表，可以有多个容器

  <span class="token key atrule">+ name</span><span class="token punctuation">:</span> string //容器的名称

<span class="token key atrule">image</span><span class="token punctuation">:</span> string //容器中的镜像
<span class="token key atrule">imagesPullPolicy</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Always<span class="token punctuation">|</span>Never<span class="token punctuation">|</span>IfNotPresent<span class="token punctuation">]</span>//获取镜像的策略，默认值为Always，每次都尝试重新下载镜像
<span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span> //容器的启动命令列表（不配置的话使用镜像内部的命令） 
<span class="token key atrule">args</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span> //启动参数列表
<span class="token key atrule">workingDir</span><span class="token punctuation">:</span> <span class="token key atrule">string //容器的工作目录 volumeMounts</span><span class="token punctuation">:</span> //挂载到到容器内部的存储卷设置
  <span class="token key atrule">-name</span><span class="token punctuation">:</span> string
<span class="token key atrule">mountPath</span><span class="token punctuation">:</span> string //存储卷在容器内部 Mount 的绝对路径 
<span class="token key atrule">readOnly</span><span class="token punctuation">:</span> boolean //默认值为读写
<span class="token key atrule">ports</span><span class="token punctuation">:</span> //容器需要暴露的端口号列表
  <span class="token key atrule">-name</span><span class="token punctuation">:</span> string
<span class="token key atrule">containerPort</span><span class="token punctuation">:</span> int //容器要暴露的端口
<span class="token key atrule">hostPort</span><span class="token punctuation">:</span> int //容器所在主机监听的端口（容器暴露端口映射到宿主机的端口，设置hostPort 时同一 台宿主机将不能再启动该容器的第 2 份副本）
<span class="token key atrule">protocol</span><span class="token punctuation">:</span> <span class="token key atrule">string //TCP 和 UDP，默认值为 TCP env</span><span class="token punctuation">:</span> //容器运行前要设置的环境列表
  <span class="token key atrule">-name</span><span class="token punctuation">:</span> <span class="token key atrule">string value</span><span class="token punctuation">:</span> string
<span class="token key atrule">resources</span><span class="token punctuation">:</span>
<span class="token key atrule">limits</span><span class="token punctuation">:</span> <span class="token key atrule">//资源限制，容器的最大可用资源数量 cpu</span><span class="token punctuation">:</span> Srting
<span class="token key atrule">memory</span><span class="token punctuation">:</span> string
<span class="token key atrule">requeste</span><span class="token punctuation">:</span> <span class="token key atrule">//资源限制，容器启动的初始可用资源数量 cpu</span><span class="token punctuation">:</span> string
<span class="token key atrule">memory</span><span class="token punctuation">:</span> string
<span class="token key atrule">livenessProbe</span><span class="token punctuation">:</span> <span class="token key atrule">//pod 内容器健康检查的设置 exec</span><span class="token punctuation">:</span>
<span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>string<span class="token punctuation">]</span> //exec 方式需要指定的命令或脚本 httpGet<span class="token punctuation">:</span> //通过 httpget 检查健康
<span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token key atrule">string port</span><span class="token punctuation">:</span> <span class="token key atrule">number host</span><span class="token punctuation">:</span> <span class="token key atrule">string scheme</span><span class="token punctuation">:</span> <span class="token key atrule">Srtring httpHeaders</span><span class="token punctuation">:</span>
  <span class="token key atrule">-name</span><span class="token punctuation">:</span> <span class="token key atrule">Stirng value</span><span class="token punctuation">:</span> string
<span class="token key atrule">tcpSocket</span><span class="token punctuation">:</span> //通过 tcpSocket 检查健康
<span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token key atrule">number initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token key atrule">0//首次检查时间 timeoutSeconds</span><span class="token punctuation">:</span> 0 //检查超时时间
<span class="token key atrule">periodSeconds</span><span class="token punctuation">:</span> 0 //检查间隔时间
<span class="token key atrule">successThreshold</span><span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token key atrule">failureThreshold</span><span class="token punctuation">:</span> <span class="token key atrule">0 securityContext</span><span class="token punctuation">:</span> //安全配置
<span class="token key atrule">privileged</span><span class="token punctuation">:</span> falae
<span class="token key atrule">restartPolicy</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Always<span class="token punctuation">|</span>Never<span class="token punctuation">|</span>OnFailure<span class="token punctuation">]</span>//重启策略，默认值为 Always
<span class="token key atrule">nodeSelector</span><span class="token punctuation">:</span> object //节点选择，表示将该 Pod 调度到包含这些 label 的 Node 上，以key<span class="token punctuation">:</span>value 格式指定
<span class="token key atrule">imagePullSecrets</span><span class="token punctuation">:</span>
  <span class="token key atrule">-name</span><span class="token punctuation">:</span> string
<span class="token key atrule">hostNetwork</span><span class="token punctuation">:</span> false //是否使用主机网络模式，弃用 Docker 网桥，默认否
<span class="token key atrule">volumes</span><span class="token punctuation">:</span> //在该 pod 上定义共享存储卷列表
  <span class="token key atrule">-name</span><span class="token punctuation">:</span> <span class="token key atrule">string emptyDir</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> hostPath<span class="token punctuation">:</span>
<span class="token key atrule">path</span><span class="token punctuation">:</span> <span class="token key atrule">string secret</span><span class="token punctuation">:</span>
<span class="token key atrule">secretName</span><span class="token punctuation">:</span> <span class="token key atrule">string item</span><span class="token punctuation">:</span>
  <span class="token key atrule">-key</span><span class="token punctuation">:</span> <span class="token key atrule">string path</span><span class="token punctuation">:</span> string
<span class="token key atrule">configMap</span><span class="token punctuation">:</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">string items</span><span class="token punctuation">:</span>

  <span class="token key atrule">+ key</span><span class="token punctuation">:</span> string

<span class="token key atrule">path</span><span class="token punctuation">:</span> string
</code></pre></div><h2 id="pod-的基本使用方法"><a href="#pod-的基本使用方法" class="header-anchor">#</a> Pod 的基本使用方法</h2> <p>在 kubernetes 中对运行容器的要求为：容器的主程序需要一直在前台运行，而不是后台运行。应用需要改造成前 台运行的方式。如果我们创建的 Docker 镜像的启动命令是后台执行程序，则在 kubelet 创建包含这个容器的 pod 之 后运行完该命令，即认为 Pod 已经结束，将立刻销毁该 Pod。如果为该 Pod 定义了 RC，则创建、销毁会陷入一个无 限循环的过程中。Pod 可以由 1 个或多个容器组合而成。</p> <ul><li>一个容器组成的 Pod 的 yaml 示例</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 一个容器组成的 Pod</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1 
<span class="token key atrule">kind</span><span class="token punctuation">:</span> <span class="token key atrule">Pod metadata</span><span class="token punctuation">:</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">mytomcat labels</span><span class="token punctuation">:</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">mytomcat spec</span><span class="token punctuation">:</span>
<span class="token key atrule">containers</span><span class="token punctuation">:</span>

  <span class="token key atrule">+ name</span><span class="token punctuation">:</span> <span class="token key atrule">mytomcat image</span><span class="token punctuation">:</span> <span class="token key atrule">tomcat ports</span><span class="token punctuation">:</span>
  <span class="token key atrule">+ containerPort</span><span class="token punctuation">:</span> <span class="token number">8000</span>

</code></pre></div><ul><li>多个容器组成的 Pod 的 yaml 示例</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 两个紧密耦合的容器</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1 
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod 
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>

<span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token key atrule">myweb labels</span><span class="token punctuation">:</span>

<span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">-</span>redis

<span class="token key atrule">spec</span><span class="token punctuation">:</span>

<span class="token key atrule">containers</span><span class="token punctuation">:</span>

<span class="token key atrule">-name</span><span class="token punctuation">:</span> <span class="token key atrule">tomcat image</span><span class="token punctuation">:</span> <span class="token key atrule">tomcat ports</span><span class="token punctuation">:</span>

<span class="token key atrule">-containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>

<span class="token key atrule">-name</span><span class="token punctuation">:</span> <span class="token key atrule">redis image</span><span class="token punctuation">:</span> <span class="token key atrule">redis ports</span><span class="token punctuation">:</span>

<span class="token key atrule">-containerPort</span><span class="token punctuation">:</span> <span class="token number">6379</span>

</code></pre></div><ul><li>创建</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl create -f xxx.yaml
</code></pre></div><ul><li>查看</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl get pod/po <span class="token operator">&lt;</span>Pod_name<span class="token operator">&gt;</span>

kubectl get pod/po <span class="token operator">&lt;</span>Pod_name<span class="token operator">&gt;</span> -o wide

kubectl describe pod/po <span class="token operator">&lt;</span>Pod_name<span class="token operator">&gt;</span>
</code></pre></div><ul><li>删除</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl delete -f pod pod_name.yaml

kubectl delete pod --all/<span class="token punctuation">[</span>pod_name<span class="token punctuation">]</span>
</code></pre></div><h2 id="pod-的分类"><a href="#pod-的分类" class="header-anchor">#</a> Pod 的分类</h2> <p>Pod 有两种类型</p> <h3 id="普通-pod"><a href="#普通-pod" class="header-anchor">#</a> 普通 Pod</h3> <p>普通 Pod 一旦被创建，就会被放入到 etcd 中存储，随后会被 Kubernetes Master 调度到某个具体的 Node 上并进行绑定，随后该 Pod 对应的 Node 上的 kubelet 进程实例化成一组相关的 Docker 容器并启动起来。在默认情 况下，当 Pod 里某个容器停止时，Kubernetes 会自动检测到这个问题并且重新启动这个 Pod 里某所有容器， 如果 Pod 所在的 Node 宕机，则会将这个 Node 上的所有 Pod 重新调度到其它节点上。</p> <h3 id="静态-pod"><a href="#静态-pod" class="header-anchor">#</a> 静态 Pod</h3> <p>静态 Pod 是由 kubelet 进行管理的仅存在于特定 Node 上的 Pod, 它们不能通过 API Server 进行管理，无法与 ReplicationController、Deployment 或 DaemonSet 进行关联，并且</p> <p>kubelet 也无法对它们进行健康检查。</p> <h2 id="pod-生命周期和重启策略"><a href="#pod-生命周期和重启策略" class="header-anchor">#</a> Pod 生命周期和重启策略</h2> <h3 id="pod-的状态"><a href="#pod-的状态" class="header-anchor">#</a> Pod 的状态</h3> <p><img src="/blog/assets/img/2021-04-22-17-40-14.4ca7c0a8.png" alt=""></p> <h3 id="pod-重启策略"><a href="#pod-重启策略" class="header-anchor">#</a> Pod 重启策略</h3> <p>Pod 的重启策略包括 Always、OnFailure 和 Never，默认值是 Always<br> <img src="/blog/assets/img/2021-04-22-17-40-35.d5a11a16.png" alt=""></p> <h3 id="常见状态转换"><a href="#常见状态转换" class="header-anchor">#</a> 常见状态转换</h3> <p><img src="/blog/assets/img/2021-04-22-17-40-58.7b343c7f.png" alt=""></p> <h2 id="pod-资源配置"><a href="#pod-资源配置" class="header-anchor">#</a> Pod 资源配置</h2> <p>每个 Pod 都可以对其能使用的服务器上的计算资源设置限额，Kubernetes 中可以设置限额的计算资源有 CPU 与 Memory 两种，其中 CPU 的资源单位为 CPU 数量, 是一个绝对值而非相对值。Memory 配额也是一个绝对值，它的单 位是内存字节数。<br>
Kubernetes 里，一个计算资源进行配额限定需要设定以下两个参数： Requests 该资源最小申请数量，系统必须满足要求 Limits 该资源最大允许使用的量，不能突破，当容器试图使用超过这个量的资源时，可能会被 Kubernetes Kill 并重启</p> <h3 id="举例"><a href="#举例" class="header-anchor">#</a> 举例</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>sepc

containers:

 - name: db

image: mysql

resources:

requests:

memory: <span class="token string">&quot;64Mi&quot;</span>

cpu: <span class="token string">&quot;250m&quot;</span>

limits:

memory: <span class="token string">&quot;128Mi&quot;</span>

cpu: <span class="token string">&quot;500m&quot;</span> 
</code></pre></div><p>上述代码表明 MySQL 容器申请最少 0.25 个 CPU 以及 64MiB 内存，在运行过程中容器所能使用的资源配额为 0.5 个 CPU 以及 128MiB 内存。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2021, 1:25:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/系统组件与架构设计/K8S/5kubernetes 集群命令行工具 kubectl.html" class="prev">
        集群命令行工具 kubectl
      </a></span> <span class="next"><a href="/blog/系统组件与架构设计/K8S/7kubernetes 核心技术-Label.html">
        核心技术-Label
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.4d60979a.js" defer></script><script src="/blog/assets/js/3.64b046d0.js" defer></script><script src="/blog/assets/js/43.d3b62f61.js" defer></script>
  </body>
</html>
