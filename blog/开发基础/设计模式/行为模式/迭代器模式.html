<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>迭代器模式 | 一名PHP+GO工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b3aba94c.css" as="style"><link rel="preload" href="/blog/assets/js/app.4c58f1db.js" as="script"><link rel="preload" href="/blog/assets/js/3.a4fcd0ee.js" as="script"><link rel="preload" href="/blog/assets/js/50.f8254ac5.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.835fec01.js"><link rel="prefetch" href="/blog/assets/js/100.dc00317a.js"><link rel="prefetch" href="/blog/assets/js/101.7eebede9.js"><link rel="prefetch" href="/blog/assets/js/102.82f3c447.js"><link rel="prefetch" href="/blog/assets/js/103.eab9003e.js"><link rel="prefetch" href="/blog/assets/js/104.10bc5a69.js"><link rel="prefetch" href="/blog/assets/js/105.4ab84c31.js"><link rel="prefetch" href="/blog/assets/js/106.48a2438e.js"><link rel="prefetch" href="/blog/assets/js/107.cc68b4a0.js"><link rel="prefetch" href="/blog/assets/js/108.a8d052c3.js"><link rel="prefetch" href="/blog/assets/js/109.2cc1bd1b.js"><link rel="prefetch" href="/blog/assets/js/11.2975610c.js"><link rel="prefetch" href="/blog/assets/js/110.8f8186a2.js"><link rel="prefetch" href="/blog/assets/js/111.eaf08c2f.js"><link rel="prefetch" href="/blog/assets/js/112.c4fa3638.js"><link rel="prefetch" href="/blog/assets/js/113.2b4447c9.js"><link rel="prefetch" href="/blog/assets/js/114.04ffca65.js"><link rel="prefetch" href="/blog/assets/js/115.e5496f96.js"><link rel="prefetch" href="/blog/assets/js/116.4a8c606f.js"><link rel="prefetch" href="/blog/assets/js/117.037382b2.js"><link rel="prefetch" href="/blog/assets/js/118.5bb91c57.js"><link rel="prefetch" href="/blog/assets/js/119.09db3f3b.js"><link rel="prefetch" href="/blog/assets/js/12.a764b57a.js"><link rel="prefetch" href="/blog/assets/js/120.b24a6d4e.js"><link rel="prefetch" href="/blog/assets/js/121.ca19b1f3.js"><link rel="prefetch" href="/blog/assets/js/122.561ef8e8.js"><link rel="prefetch" href="/blog/assets/js/123.f0e374e2.js"><link rel="prefetch" href="/blog/assets/js/124.e9989260.js"><link rel="prefetch" href="/blog/assets/js/125.b0f30b2f.js"><link rel="prefetch" href="/blog/assets/js/126.1a1939b5.js"><link rel="prefetch" href="/blog/assets/js/127.e2142582.js"><link rel="prefetch" href="/blog/assets/js/128.a6a813a1.js"><link rel="prefetch" href="/blog/assets/js/129.bf107fcf.js"><link rel="prefetch" href="/blog/assets/js/13.3adc8648.js"><link rel="prefetch" href="/blog/assets/js/130.130b9782.js"><link rel="prefetch" href="/blog/assets/js/131.b153558f.js"><link rel="prefetch" href="/blog/assets/js/132.2472d0a5.js"><link rel="prefetch" href="/blog/assets/js/133.549915cc.js"><link rel="prefetch" href="/blog/assets/js/134.5b06b412.js"><link rel="prefetch" href="/blog/assets/js/135.95e51dda.js"><link rel="prefetch" href="/blog/assets/js/136.1d13c0e3.js"><link rel="prefetch" href="/blog/assets/js/137.a6b4615c.js"><link rel="prefetch" href="/blog/assets/js/138.738cf96b.js"><link rel="prefetch" href="/blog/assets/js/139.d897ac9a.js"><link rel="prefetch" href="/blog/assets/js/14.a3b148c6.js"><link rel="prefetch" href="/blog/assets/js/140.270aba65.js"><link rel="prefetch" href="/blog/assets/js/141.e1f2d4d3.js"><link rel="prefetch" href="/blog/assets/js/142.2ff02945.js"><link rel="prefetch" href="/blog/assets/js/143.c72c097b.js"><link rel="prefetch" href="/blog/assets/js/144.dc000941.js"><link rel="prefetch" href="/blog/assets/js/145.c82275d5.js"><link rel="prefetch" href="/blog/assets/js/146.4aebd6b1.js"><link rel="prefetch" href="/blog/assets/js/147.0287686c.js"><link rel="prefetch" href="/blog/assets/js/148.b0bca954.js"><link rel="prefetch" href="/blog/assets/js/149.15a2e786.js"><link rel="prefetch" href="/blog/assets/js/15.6bfd2036.js"><link rel="prefetch" href="/blog/assets/js/150.2cfeb60d.js"><link rel="prefetch" href="/blog/assets/js/151.c359177f.js"><link rel="prefetch" href="/blog/assets/js/152.19a86bd8.js"><link rel="prefetch" href="/blog/assets/js/153.4159b600.js"><link rel="prefetch" href="/blog/assets/js/154.121f5cc3.js"><link rel="prefetch" href="/blog/assets/js/155.97708bc3.js"><link rel="prefetch" href="/blog/assets/js/156.f9c6bcdd.js"><link rel="prefetch" href="/blog/assets/js/157.6755fc50.js"><link rel="prefetch" href="/blog/assets/js/158.479651f6.js"><link rel="prefetch" href="/blog/assets/js/159.031af42e.js"><link rel="prefetch" href="/blog/assets/js/16.62be6808.js"><link rel="prefetch" href="/blog/assets/js/160.ec9dd64d.js"><link rel="prefetch" href="/blog/assets/js/161.bc8dd162.js"><link rel="prefetch" href="/blog/assets/js/162.2b87186a.js"><link rel="prefetch" href="/blog/assets/js/163.5efb49e5.js"><link rel="prefetch" href="/blog/assets/js/164.7b79d6e9.js"><link rel="prefetch" href="/blog/assets/js/165.c0887522.js"><link rel="prefetch" href="/blog/assets/js/166.59b3fd1e.js"><link rel="prefetch" href="/blog/assets/js/167.3350e62a.js"><link rel="prefetch" href="/blog/assets/js/168.305d6c4c.js"><link rel="prefetch" href="/blog/assets/js/169.1e7bb107.js"><link rel="prefetch" href="/blog/assets/js/17.380ba58f.js"><link rel="prefetch" href="/blog/assets/js/170.a5ef964f.js"><link rel="prefetch" href="/blog/assets/js/171.c65fb717.js"><link rel="prefetch" href="/blog/assets/js/172.449d2311.js"><link rel="prefetch" href="/blog/assets/js/173.83f97e48.js"><link rel="prefetch" href="/blog/assets/js/174.3eca4f09.js"><link rel="prefetch" href="/blog/assets/js/175.9fc6896e.js"><link rel="prefetch" href="/blog/assets/js/176.2036b264.js"><link rel="prefetch" href="/blog/assets/js/177.5b0117fa.js"><link rel="prefetch" href="/blog/assets/js/178.65b256f2.js"><link rel="prefetch" href="/blog/assets/js/179.f26bcc6c.js"><link rel="prefetch" href="/blog/assets/js/18.5cc6f3a7.js"><link rel="prefetch" href="/blog/assets/js/180.0f225157.js"><link rel="prefetch" href="/blog/assets/js/181.680ac14a.js"><link rel="prefetch" href="/blog/assets/js/182.3edee8c1.js"><link rel="prefetch" href="/blog/assets/js/183.2ad4dd90.js"><link rel="prefetch" href="/blog/assets/js/19.a5c2b897.js"><link rel="prefetch" href="/blog/assets/js/2.c8a68b51.js"><link rel="prefetch" href="/blog/assets/js/20.dba1906e.js"><link rel="prefetch" href="/blog/assets/js/21.eb95247a.js"><link rel="prefetch" href="/blog/assets/js/22.0dc20366.js"><link rel="prefetch" href="/blog/assets/js/23.216a8421.js"><link rel="prefetch" href="/blog/assets/js/24.2710df9d.js"><link rel="prefetch" href="/blog/assets/js/25.a628a83e.js"><link rel="prefetch" href="/blog/assets/js/26.c8cc9490.js"><link rel="prefetch" href="/blog/assets/js/27.b6aa595b.js"><link rel="prefetch" href="/blog/assets/js/28.e9bc0181.js"><link rel="prefetch" href="/blog/assets/js/29.dd1ae43d.js"><link rel="prefetch" href="/blog/assets/js/30.d695ccf7.js"><link rel="prefetch" href="/blog/assets/js/31.32df4d02.js"><link rel="prefetch" href="/blog/assets/js/32.0fffbc5f.js"><link rel="prefetch" href="/blog/assets/js/33.6b3bbf30.js"><link rel="prefetch" href="/blog/assets/js/34.b4c3eaa1.js"><link rel="prefetch" href="/blog/assets/js/35.76a8a203.js"><link rel="prefetch" href="/blog/assets/js/36.4d6733d9.js"><link rel="prefetch" href="/blog/assets/js/37.95ddd62d.js"><link rel="prefetch" href="/blog/assets/js/38.d92a014e.js"><link rel="prefetch" href="/blog/assets/js/39.c6e76213.js"><link rel="prefetch" href="/blog/assets/js/4.e9a98dae.js"><link rel="prefetch" href="/blog/assets/js/40.8c0ce826.js"><link rel="prefetch" href="/blog/assets/js/41.33b0fa25.js"><link rel="prefetch" href="/blog/assets/js/42.96f29d4d.js"><link rel="prefetch" href="/blog/assets/js/43.4ed5ff9c.js"><link rel="prefetch" href="/blog/assets/js/44.77353d4f.js"><link rel="prefetch" href="/blog/assets/js/45.ab5daeac.js"><link rel="prefetch" href="/blog/assets/js/46.8adfc6dd.js"><link rel="prefetch" href="/blog/assets/js/47.2ae15dfc.js"><link rel="prefetch" href="/blog/assets/js/48.31ba75e5.js"><link rel="prefetch" href="/blog/assets/js/49.49e438b2.js"><link rel="prefetch" href="/blog/assets/js/5.5ec4d71f.js"><link rel="prefetch" href="/blog/assets/js/51.90ad6773.js"><link rel="prefetch" href="/blog/assets/js/52.b5da9d10.js"><link rel="prefetch" href="/blog/assets/js/53.82345eb5.js"><link rel="prefetch" href="/blog/assets/js/54.f93a6f8d.js"><link rel="prefetch" href="/blog/assets/js/55.dd6d8ef8.js"><link rel="prefetch" href="/blog/assets/js/56.63add859.js"><link rel="prefetch" href="/blog/assets/js/57.bd76cf23.js"><link rel="prefetch" href="/blog/assets/js/58.25135cb4.js"><link rel="prefetch" href="/blog/assets/js/59.ecd67516.js"><link rel="prefetch" href="/blog/assets/js/6.84e1b999.js"><link rel="prefetch" href="/blog/assets/js/60.23e89841.js"><link rel="prefetch" href="/blog/assets/js/61.68d9cb1f.js"><link rel="prefetch" href="/blog/assets/js/62.d1b8d952.js"><link rel="prefetch" href="/blog/assets/js/63.1d640eca.js"><link rel="prefetch" href="/blog/assets/js/64.32167475.js"><link rel="prefetch" href="/blog/assets/js/65.f7a24ac5.js"><link rel="prefetch" href="/blog/assets/js/66.5a4ad07b.js"><link rel="prefetch" href="/blog/assets/js/67.5abe04b4.js"><link rel="prefetch" href="/blog/assets/js/68.4bd07a6f.js"><link rel="prefetch" href="/blog/assets/js/69.61cefde7.js"><link rel="prefetch" href="/blog/assets/js/7.be512878.js"><link rel="prefetch" href="/blog/assets/js/70.d884d460.js"><link rel="prefetch" href="/blog/assets/js/71.6346d932.js"><link rel="prefetch" href="/blog/assets/js/72.669b09d5.js"><link rel="prefetch" href="/blog/assets/js/73.c1d8c39c.js"><link rel="prefetch" href="/blog/assets/js/74.36016cfd.js"><link rel="prefetch" href="/blog/assets/js/75.fb7d7a96.js"><link rel="prefetch" href="/blog/assets/js/76.ba71ac91.js"><link rel="prefetch" href="/blog/assets/js/77.651eea09.js"><link rel="prefetch" href="/blog/assets/js/78.9993efdc.js"><link rel="prefetch" href="/blog/assets/js/79.816d277e.js"><link rel="prefetch" href="/blog/assets/js/8.93ccc70d.js"><link rel="prefetch" href="/blog/assets/js/80.e39860ed.js"><link rel="prefetch" href="/blog/assets/js/81.77799baa.js"><link rel="prefetch" href="/blog/assets/js/82.9b8b2e5c.js"><link rel="prefetch" href="/blog/assets/js/83.1ae8f42d.js"><link rel="prefetch" href="/blog/assets/js/84.ffb238f7.js"><link rel="prefetch" href="/blog/assets/js/85.238317c1.js"><link rel="prefetch" href="/blog/assets/js/86.badce18f.js"><link rel="prefetch" href="/blog/assets/js/87.bf03f5f0.js"><link rel="prefetch" href="/blog/assets/js/88.817f8a13.js"><link rel="prefetch" href="/blog/assets/js/89.3b6fc0d2.js"><link rel="prefetch" href="/blog/assets/js/9.aba0f006.js"><link rel="prefetch" href="/blog/assets/js/90.c08fced7.js"><link rel="prefetch" href="/blog/assets/js/91.247d2df4.js"><link rel="prefetch" href="/blog/assets/js/92.8b0a6fda.js"><link rel="prefetch" href="/blog/assets/js/93.be593c08.js"><link rel="prefetch" href="/blog/assets/js/94.27fd5c80.js"><link rel="prefetch" href="/blog/assets/js/95.021cdc5a.js"><link rel="prefetch" href="/blog/assets/js/96.e1d5c9c7.js"><link rel="prefetch" href="/blog/assets/js/97.b3e60c1f.js"><link rel="prefetch" href="/blog/assets/js/98.73459e19.js"><link rel="prefetch" href="/blog/assets/js/99.737e92f6.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b3aba94c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名PHP+GO工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/创建型模式/单例模式" class="sidebar-heading clickable"><span>创建型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/创建型模式/单例模式.html" class="sidebar-link">单例模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/原型模式.html" class="sidebar-link">原型模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/工厂方法模式.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/抽象工厂模式.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/生成器模式.html" class="sidebar-link">生成器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/结构型模式/享元模式" class="sidebar-heading clickable"><span>结构型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/结构型模式/享元模式.html" class="sidebar-link">享元模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/代理模式.html" class="sidebar-link">代理模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html" class="sidebar-link">外观模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/桥接模式.html" class="sidebar-link">桥接模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/组合模式.html" class="sidebar-link">组合模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html" class="sidebar-link">装饰模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/适配器模式.html" class="sidebar-link">适配器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/行为模式/中介者模式" class="sidebar-heading clickable open"><span>行为模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/行为模式/中介者模式.html" class="sidebar-link">中介者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/命令模式.html" class="sidebar-link">命令模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/备忘录模式.html" class="sidebar-link">备忘录模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/模板方法模式.html" class="sidebar-link">模板方法模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/状态模式.html" class="sidebar-link">状态模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/策略模式.html" class="sidebar-link">策略模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/观察者模式.html" class="sidebar-link">观察者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/访问者模式.html" class="sidebar-link">访问者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/责任链模式.html" class="sidebar-link">责任链模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html" class="active sidebar-link">迭代器模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html#意图" class="sidebar-link">意图</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html#解决方案" class="sidebar-link">解决方案</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html#真实世界类比" class="sidebar-link">真实世界类比</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html#概念示例" class="sidebar-link">概念示例</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="迭代器模式"><a href="#迭代器模式" class="header-anchor">#</a> 迭代器模式</h1> <h2 id="意图"><a href="#意图" class="header-anchor">#</a> 意图</h2> <p><strong>迭代器模式</strong>是一种行为设计模式， 让你能在不暴露集合底层表现形式 （列表、 栈和树等） 的情况下遍历集合中所有的元素。</p> <p><img src="/blog/assets/img/iterator-zh.2068b9bd.png" alt="迭代器设计模式"></p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <p>集合是编程中最常使用的数据类型之一。 尽管如此， 集合只是一组对象的容器而已。</p> <p><img src="/blog/assets/img/problem1.c9d66309.png" alt="各种类型的集合"></p> <p>各种类型的集合。</p> <p>大部分集合使用简单列表存储元素。 但有些集合还会使用栈、 树、 图和其他复杂的数据结构。</p> <p>无论集合的构成方式如何， 它都必须提供某种访问元素的方式， 便于其他代码使用其中的元素。 集合应提供一种能够遍历元素的方式， 且保证它不会周而复始地访问同一个元素。</p> <p>如果你的集合基于列表， 那么这项工作听上去仿佛很简单。 但如何遍历复杂数据结构 （例如树） 中的元素呢？ 例如， 今天你需要使用深度优先算法来遍历树结构， 明天可能会需要广度优先算法； 下周则可能会需要其他方式 （比如随机存取树中的元素）。</p> <p><img src="data:image/png;base64,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" alt="各种遍历算法"></p> <p>可通过不同的方式遍历相同的集合。</p> <p>不断向集合中添加遍历算法会模糊其 “高效存储数据” 的主要职责。 此外， 有些算法可能是根据特定应用订制的， 将其加入泛型集合类中会显得非常奇怪。</p> <p>另一方面， 使用多种集合的客户端代码可能并不关心存储数据的方式。 不过由于集合提供不同的元素访问方式， 你的代码将不得不与特定集合类进行耦合。</p> <h2 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h2> <p>迭代器模式的主要思想是将集合的遍历行为抽取为单独的<em>迭代器</em>对象。</p> <p><img src="/blog/assets/img/solution1.0f64e4d2.png" alt="迭代器可以实现不同算法"></p> <p>迭代器可实现多种遍历算法。 多个迭代器对象可同时遍历同一个集合。</p> <p>除实现自身算法外， 迭代器还封装了遍历操作的所有细节， 例如当前位置和末尾剩余元素的数量。 因此， 多个迭代器可以在相互独立的情况下同时访问集合。</p> <p>迭代器通常会提供一个获取集合元素的基本方法。 客户端可不断调用该方法直至它不返回任何内容， 这意味着迭代器已经遍历了所有元素。</p> <p>所有迭代器必须实现相同的接口。 这样一来， 只要有合适的迭代器， 客户端代码就能兼容任何类型的集合或遍历算法。 如果你需要采用特殊方式来遍历集合， 只需创建一个新的迭代器类即可， 无需对集合或客户端进行修改。</p> <h2 id="真实世界类比"><a href="#真实世界类比" class="header-anchor">#</a> 真实世界类比</h2> <p><img src="/blog/assets/img/iterator-comic-1-zh.168120cb.png" alt="漫步罗马的不同方式"></p> <p>漫步罗马的不同方式。</p> <p>你计划在罗马游览数天， 参观所有主要的旅游景点。 但在到达目的地后， 你可能会浪费很多时间绕圈子， 甚至找不到罗马斗兽场在哪里。</p> <p>或者你可以购买一款智能手机上的虚拟导游程序。 这款程序非常智能而且价格不贵， 你想在景点待多久都可以。</p> <p>第三种选择是用部分旅行预算雇佣一位对城市了如指掌的当地向导。 向导能根据你的喜好来安排行程， 为你介绍每个景点并讲述许多激动人心的故事。 这样的旅行可能会更有趣， 但所需费用也会更高。</p> <p>所有这些选择(自由漫步、 智能手机导航或真人向导)都是这个由众多罗马景点组成的集合的迭代器。</p> <h1 id="go-迭代器模式讲解和代码示例"><a href="#go-迭代器模式讲解和代码示例" class="header-anchor">#</a> Go <strong>迭代器</strong>模式讲解和代码示例</h1> <p><strong>迭代器</strong>是一种行为设计模式， 让你能在不暴露复杂数据结构内部细节的情况下遍历其中所有的元素。</p> <p>在迭代器的帮助下， 客户端可以用一个迭代器接口以相似的方式遍历不同集合中的元素。</p> <h2 id="概念示例"><a href="#概念示例" class="header-anchor">#</a> 概念示例</h2> <p>迭代器模式的主要思想是将集合背后的迭代逻辑提取至不同的、 名为迭代器的对象中。 此迭代器提供了一种泛型方法， 可用于在集合上进行迭代， 而又不受其类型影响。</p> <h4 id="collection-go-集合"><a href="#collection-go-集合" class="header-anchor">#</a> <strong>collection.go:</strong> 集合</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> collection <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> iterator
<span class="token punctuation">}</span>
</code></pre></div><h4 id="usercollection-go-具体集合"><a href="#usercollection-go-具体集合" class="header-anchor">#</a> <strong>userCollection.go:</strong> 具体集合</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> userCollection <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    users <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>user
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>userCollection<span class="token punctuation">)</span> <span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> iterator <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>userIterator<span class="token punctuation">{</span>
        users<span class="token punctuation">:</span> u<span class="token punctuation">.</span>users<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="iterator-go-迭代器"><a href="#iterator-go-迭代器" class="header-anchor">#</a> <strong>iterator.go:</strong> 迭代器</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> iterator <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
    <span class="token function">getNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>user
<span class="token punctuation">}</span>
</code></pre></div><h4 id="useriterator-go-具体迭代器"><a href="#useriterator-go-具体迭代器" class="header-anchor">#</a> <strong>userIterator.go:</strong> 具体迭代器</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> userIterator <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    index <span class="token builtin">int</span>
    users <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>user
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>userIterator<span class="token punctuation">)</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> u<span class="token punctuation">.</span>index <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>

<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>userIterator<span class="token punctuation">)</span> <span class="token function">getNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>user <span class="token punctuation">{</span>
    <span class="token keyword">if</span> u<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        user <span class="token operator">:=</span> u<span class="token punctuation">.</span>users<span class="token punctuation">[</span>u<span class="token punctuation">.</span>index<span class="token punctuation">]</span>
        u<span class="token punctuation">.</span>index<span class="token operator">++</span>
        <span class="token keyword">return</span> user
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="user-go-客户端代码"><a href="#user-go-客户端代码" class="header-anchor">#</a> <strong>user.go:</strong> 客户端代码</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> user <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
    age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="main-go-客户端代码"><a href="#main-go-客户端代码" class="header-anchor">#</a> <strong>main.go:</strong> 客户端代码</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    user1 <span class="token operator">:=</span> <span class="token operator">&amp;</span>user<span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>
        age<span class="token punctuation">:</span>  <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    user2 <span class="token operator">:=</span> <span class="token operator">&amp;</span>user<span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span>
        age<span class="token punctuation">:</span>  <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    userCollection <span class="token operator">:=</span> <span class="token operator">&amp;</span>userCollection<span class="token punctuation">{</span>
        users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>user<span class="token punctuation">{</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    iterator <span class="token operator">:=</span> userCollection<span class="token punctuation">.</span><span class="token function">createIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> iterator<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        user <span class="token operator">:=</span> iterator<span class="token punctuation">.</span><span class="token function">getNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;User is %+v\n&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="output-txt-执行结果"><a href="#output-txt-执行结果" class="header-anchor">#</a> <strong>output.txt:</strong> 执行结果</h4> <div class="language- extra-class"><pre class="language-text"><code>User is &amp;{name:a age:30}
User is &amp;{name:b age:20}
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2021, 1:25:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/开发基础/设计模式/行为模式/责任链模式.html" class="prev">
        责任链模式
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.4c58f1db.js" defer></script><script src="/blog/assets/js/3.a4fcd0ee.js" defer></script><script src="/blog/assets/js/50.f8254ac5.js" defer></script>
  </body>
</html>
