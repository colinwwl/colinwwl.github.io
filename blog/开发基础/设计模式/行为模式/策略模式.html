<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>策略模式 | 一名PHP+GO工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b3aba94c.css" as="style"><link rel="preload" href="/blog/assets/js/app.4c58f1db.js" as="script"><link rel="preload" href="/blog/assets/js/3.a4fcd0ee.js" as="script"><link rel="preload" href="/blog/assets/js/64.32167475.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.835fec01.js"><link rel="prefetch" href="/blog/assets/js/100.dc00317a.js"><link rel="prefetch" href="/blog/assets/js/101.7eebede9.js"><link rel="prefetch" href="/blog/assets/js/102.82f3c447.js"><link rel="prefetch" href="/blog/assets/js/103.eab9003e.js"><link rel="prefetch" href="/blog/assets/js/104.10bc5a69.js"><link rel="prefetch" href="/blog/assets/js/105.4ab84c31.js"><link rel="prefetch" href="/blog/assets/js/106.48a2438e.js"><link rel="prefetch" href="/blog/assets/js/107.cc68b4a0.js"><link rel="prefetch" href="/blog/assets/js/108.a8d052c3.js"><link rel="prefetch" href="/blog/assets/js/109.2cc1bd1b.js"><link rel="prefetch" href="/blog/assets/js/11.2975610c.js"><link rel="prefetch" href="/blog/assets/js/110.8f8186a2.js"><link rel="prefetch" href="/blog/assets/js/111.eaf08c2f.js"><link rel="prefetch" href="/blog/assets/js/112.c4fa3638.js"><link rel="prefetch" href="/blog/assets/js/113.2b4447c9.js"><link rel="prefetch" href="/blog/assets/js/114.04ffca65.js"><link rel="prefetch" href="/blog/assets/js/115.e5496f96.js"><link rel="prefetch" href="/blog/assets/js/116.4a8c606f.js"><link rel="prefetch" href="/blog/assets/js/117.037382b2.js"><link rel="prefetch" href="/blog/assets/js/118.5bb91c57.js"><link rel="prefetch" href="/blog/assets/js/119.09db3f3b.js"><link rel="prefetch" href="/blog/assets/js/12.a764b57a.js"><link rel="prefetch" href="/blog/assets/js/120.b24a6d4e.js"><link rel="prefetch" href="/blog/assets/js/121.ca19b1f3.js"><link rel="prefetch" href="/blog/assets/js/122.561ef8e8.js"><link rel="prefetch" href="/blog/assets/js/123.f0e374e2.js"><link rel="prefetch" href="/blog/assets/js/124.e9989260.js"><link rel="prefetch" href="/blog/assets/js/125.b0f30b2f.js"><link rel="prefetch" href="/blog/assets/js/126.1a1939b5.js"><link rel="prefetch" href="/blog/assets/js/127.e2142582.js"><link rel="prefetch" href="/blog/assets/js/128.a6a813a1.js"><link rel="prefetch" href="/blog/assets/js/129.bf107fcf.js"><link rel="prefetch" href="/blog/assets/js/13.3adc8648.js"><link rel="prefetch" href="/blog/assets/js/130.130b9782.js"><link rel="prefetch" href="/blog/assets/js/131.b153558f.js"><link rel="prefetch" href="/blog/assets/js/132.2472d0a5.js"><link rel="prefetch" href="/blog/assets/js/133.549915cc.js"><link rel="prefetch" href="/blog/assets/js/134.5b06b412.js"><link rel="prefetch" href="/blog/assets/js/135.95e51dda.js"><link rel="prefetch" href="/blog/assets/js/136.1d13c0e3.js"><link rel="prefetch" href="/blog/assets/js/137.a6b4615c.js"><link rel="prefetch" href="/blog/assets/js/138.738cf96b.js"><link rel="prefetch" href="/blog/assets/js/139.d897ac9a.js"><link rel="prefetch" href="/blog/assets/js/14.a3b148c6.js"><link rel="prefetch" href="/blog/assets/js/140.270aba65.js"><link rel="prefetch" href="/blog/assets/js/141.e1f2d4d3.js"><link rel="prefetch" href="/blog/assets/js/142.2ff02945.js"><link rel="prefetch" href="/blog/assets/js/143.c72c097b.js"><link rel="prefetch" href="/blog/assets/js/144.dc000941.js"><link rel="prefetch" href="/blog/assets/js/145.c82275d5.js"><link rel="prefetch" href="/blog/assets/js/146.4aebd6b1.js"><link rel="prefetch" href="/blog/assets/js/147.0287686c.js"><link rel="prefetch" href="/blog/assets/js/148.b0bca954.js"><link rel="prefetch" href="/blog/assets/js/149.15a2e786.js"><link rel="prefetch" href="/blog/assets/js/15.6bfd2036.js"><link rel="prefetch" href="/blog/assets/js/150.2cfeb60d.js"><link rel="prefetch" href="/blog/assets/js/151.c359177f.js"><link rel="prefetch" href="/blog/assets/js/152.19a86bd8.js"><link rel="prefetch" href="/blog/assets/js/153.4159b600.js"><link rel="prefetch" href="/blog/assets/js/154.121f5cc3.js"><link rel="prefetch" href="/blog/assets/js/155.97708bc3.js"><link rel="prefetch" href="/blog/assets/js/156.f9c6bcdd.js"><link rel="prefetch" href="/blog/assets/js/157.6755fc50.js"><link rel="prefetch" href="/blog/assets/js/158.479651f6.js"><link rel="prefetch" href="/blog/assets/js/159.031af42e.js"><link rel="prefetch" href="/blog/assets/js/16.62be6808.js"><link rel="prefetch" href="/blog/assets/js/160.ec9dd64d.js"><link rel="prefetch" href="/blog/assets/js/161.bc8dd162.js"><link rel="prefetch" href="/blog/assets/js/162.2b87186a.js"><link rel="prefetch" href="/blog/assets/js/163.5efb49e5.js"><link rel="prefetch" href="/blog/assets/js/164.7b79d6e9.js"><link rel="prefetch" href="/blog/assets/js/165.c0887522.js"><link rel="prefetch" href="/blog/assets/js/166.59b3fd1e.js"><link rel="prefetch" href="/blog/assets/js/167.3350e62a.js"><link rel="prefetch" href="/blog/assets/js/168.305d6c4c.js"><link rel="prefetch" href="/blog/assets/js/169.1e7bb107.js"><link rel="prefetch" href="/blog/assets/js/17.380ba58f.js"><link rel="prefetch" href="/blog/assets/js/170.a5ef964f.js"><link rel="prefetch" href="/blog/assets/js/171.c65fb717.js"><link rel="prefetch" href="/blog/assets/js/172.449d2311.js"><link rel="prefetch" href="/blog/assets/js/173.83f97e48.js"><link rel="prefetch" href="/blog/assets/js/174.3eca4f09.js"><link rel="prefetch" href="/blog/assets/js/175.9fc6896e.js"><link rel="prefetch" href="/blog/assets/js/176.2036b264.js"><link rel="prefetch" href="/blog/assets/js/177.5b0117fa.js"><link rel="prefetch" href="/blog/assets/js/178.65b256f2.js"><link rel="prefetch" href="/blog/assets/js/179.f26bcc6c.js"><link rel="prefetch" href="/blog/assets/js/18.5cc6f3a7.js"><link rel="prefetch" href="/blog/assets/js/180.0f225157.js"><link rel="prefetch" href="/blog/assets/js/181.680ac14a.js"><link rel="prefetch" href="/blog/assets/js/182.3edee8c1.js"><link rel="prefetch" href="/blog/assets/js/183.2ad4dd90.js"><link rel="prefetch" href="/blog/assets/js/19.a5c2b897.js"><link rel="prefetch" href="/blog/assets/js/2.c8a68b51.js"><link rel="prefetch" href="/blog/assets/js/20.dba1906e.js"><link rel="prefetch" href="/blog/assets/js/21.eb95247a.js"><link rel="prefetch" href="/blog/assets/js/22.0dc20366.js"><link rel="prefetch" href="/blog/assets/js/23.216a8421.js"><link rel="prefetch" href="/blog/assets/js/24.2710df9d.js"><link rel="prefetch" href="/blog/assets/js/25.a628a83e.js"><link rel="prefetch" href="/blog/assets/js/26.c8cc9490.js"><link rel="prefetch" href="/blog/assets/js/27.b6aa595b.js"><link rel="prefetch" href="/blog/assets/js/28.e9bc0181.js"><link rel="prefetch" href="/blog/assets/js/29.dd1ae43d.js"><link rel="prefetch" href="/blog/assets/js/30.d695ccf7.js"><link rel="prefetch" href="/blog/assets/js/31.32df4d02.js"><link rel="prefetch" href="/blog/assets/js/32.0fffbc5f.js"><link rel="prefetch" href="/blog/assets/js/33.6b3bbf30.js"><link rel="prefetch" href="/blog/assets/js/34.b4c3eaa1.js"><link rel="prefetch" href="/blog/assets/js/35.76a8a203.js"><link rel="prefetch" href="/blog/assets/js/36.4d6733d9.js"><link rel="prefetch" href="/blog/assets/js/37.95ddd62d.js"><link rel="prefetch" href="/blog/assets/js/38.d92a014e.js"><link rel="prefetch" href="/blog/assets/js/39.c6e76213.js"><link rel="prefetch" href="/blog/assets/js/4.e9a98dae.js"><link rel="prefetch" href="/blog/assets/js/40.8c0ce826.js"><link rel="prefetch" href="/blog/assets/js/41.33b0fa25.js"><link rel="prefetch" href="/blog/assets/js/42.96f29d4d.js"><link rel="prefetch" href="/blog/assets/js/43.4ed5ff9c.js"><link rel="prefetch" href="/blog/assets/js/44.77353d4f.js"><link rel="prefetch" href="/blog/assets/js/45.ab5daeac.js"><link rel="prefetch" href="/blog/assets/js/46.8adfc6dd.js"><link rel="prefetch" href="/blog/assets/js/47.2ae15dfc.js"><link rel="prefetch" href="/blog/assets/js/48.31ba75e5.js"><link rel="prefetch" href="/blog/assets/js/49.49e438b2.js"><link rel="prefetch" href="/blog/assets/js/5.5ec4d71f.js"><link rel="prefetch" href="/blog/assets/js/50.f8254ac5.js"><link rel="prefetch" href="/blog/assets/js/51.90ad6773.js"><link rel="prefetch" href="/blog/assets/js/52.b5da9d10.js"><link rel="prefetch" href="/blog/assets/js/53.82345eb5.js"><link rel="prefetch" href="/blog/assets/js/54.f93a6f8d.js"><link rel="prefetch" href="/blog/assets/js/55.dd6d8ef8.js"><link rel="prefetch" href="/blog/assets/js/56.63add859.js"><link rel="prefetch" href="/blog/assets/js/57.bd76cf23.js"><link rel="prefetch" href="/blog/assets/js/58.25135cb4.js"><link rel="prefetch" href="/blog/assets/js/59.ecd67516.js"><link rel="prefetch" href="/blog/assets/js/6.84e1b999.js"><link rel="prefetch" href="/blog/assets/js/60.23e89841.js"><link rel="prefetch" href="/blog/assets/js/61.68d9cb1f.js"><link rel="prefetch" href="/blog/assets/js/62.d1b8d952.js"><link rel="prefetch" href="/blog/assets/js/63.1d640eca.js"><link rel="prefetch" href="/blog/assets/js/65.f7a24ac5.js"><link rel="prefetch" href="/blog/assets/js/66.5a4ad07b.js"><link rel="prefetch" href="/blog/assets/js/67.5abe04b4.js"><link rel="prefetch" href="/blog/assets/js/68.4bd07a6f.js"><link rel="prefetch" href="/blog/assets/js/69.61cefde7.js"><link rel="prefetch" href="/blog/assets/js/7.be512878.js"><link rel="prefetch" href="/blog/assets/js/70.d884d460.js"><link rel="prefetch" href="/blog/assets/js/71.6346d932.js"><link rel="prefetch" href="/blog/assets/js/72.669b09d5.js"><link rel="prefetch" href="/blog/assets/js/73.c1d8c39c.js"><link rel="prefetch" href="/blog/assets/js/74.36016cfd.js"><link rel="prefetch" href="/blog/assets/js/75.fb7d7a96.js"><link rel="prefetch" href="/blog/assets/js/76.ba71ac91.js"><link rel="prefetch" href="/blog/assets/js/77.651eea09.js"><link rel="prefetch" href="/blog/assets/js/78.9993efdc.js"><link rel="prefetch" href="/blog/assets/js/79.816d277e.js"><link rel="prefetch" href="/blog/assets/js/8.93ccc70d.js"><link rel="prefetch" href="/blog/assets/js/80.e39860ed.js"><link rel="prefetch" href="/blog/assets/js/81.77799baa.js"><link rel="prefetch" href="/blog/assets/js/82.9b8b2e5c.js"><link rel="prefetch" href="/blog/assets/js/83.1ae8f42d.js"><link rel="prefetch" href="/blog/assets/js/84.ffb238f7.js"><link rel="prefetch" href="/blog/assets/js/85.238317c1.js"><link rel="prefetch" href="/blog/assets/js/86.badce18f.js"><link rel="prefetch" href="/blog/assets/js/87.bf03f5f0.js"><link rel="prefetch" href="/blog/assets/js/88.817f8a13.js"><link rel="prefetch" href="/blog/assets/js/89.3b6fc0d2.js"><link rel="prefetch" href="/blog/assets/js/9.aba0f006.js"><link rel="prefetch" href="/blog/assets/js/90.c08fced7.js"><link rel="prefetch" href="/blog/assets/js/91.247d2df4.js"><link rel="prefetch" href="/blog/assets/js/92.8b0a6fda.js"><link rel="prefetch" href="/blog/assets/js/93.be593c08.js"><link rel="prefetch" href="/blog/assets/js/94.27fd5c80.js"><link rel="prefetch" href="/blog/assets/js/95.021cdc5a.js"><link rel="prefetch" href="/blog/assets/js/96.e1d5c9c7.js"><link rel="prefetch" href="/blog/assets/js/97.b3e60c1f.js"><link rel="prefetch" href="/blog/assets/js/98.73459e19.js"><link rel="prefetch" href="/blog/assets/js/99.737e92f6.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b3aba94c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名PHP+GO工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/创建型模式/单例模式" class="sidebar-heading clickable"><span>创建型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/创建型模式/单例模式.html" class="sidebar-link">单例模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/原型模式.html" class="sidebar-link">原型模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/工厂方法模式.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/抽象工厂模式.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/生成器模式.html" class="sidebar-link">生成器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/结构型模式/享元模式" class="sidebar-heading clickable"><span>结构型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/结构型模式/享元模式.html" class="sidebar-link">享元模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/代理模式.html" class="sidebar-link">代理模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html" class="sidebar-link">外观模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/桥接模式.html" class="sidebar-link">桥接模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/组合模式.html" class="sidebar-link">组合模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html" class="sidebar-link">装饰模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/适配器模式.html" class="sidebar-link">适配器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/行为模式/中介者模式" class="sidebar-heading clickable open"><span>行为模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/行为模式/中介者模式.html" class="sidebar-link">中介者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/命令模式.html" class="sidebar-link">命令模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/备忘录模式.html" class="sidebar-link">备忘录模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/模板方法模式.html" class="sidebar-link">模板方法模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/状态模式.html" class="sidebar-link">状态模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/策略模式.html" class="active sidebar-link">策略模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/策略模式.html#意图" class="sidebar-link">意图</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/策略模式.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/策略模式.html#解决方案" class="sidebar-link">解决方案</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/策略模式.html#真实世界类比" class="sidebar-link">真实世界类比</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/行为模式/策略模式.html#概念示例" class="sidebar-link">概念示例</a></li></ul></li><li><a href="/blog/开发基础/设计模式/行为模式/观察者模式.html" class="sidebar-link">观察者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/访问者模式.html" class="sidebar-link">访问者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/责任链模式.html" class="sidebar-link">责任链模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html" class="sidebar-link">迭代器模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="策略模式"><a href="#策略模式" class="header-anchor">#</a> 策略模式</h1> <h2 id="意图"><a href="#意图" class="header-anchor">#</a> 意图</h2> <p><strong>策略模式</strong>是一种行为设计模式， 它能让你定义一系列算法， 并将每种算法分别放入独立的类中， 以使算法的对象能够相互替换。</p> <p><img src="/blog/assets/img/strategy.04108c97.png" alt="策略设计模式"></p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <p>一天， 你打算为游客们创建一款导游程序。 该程序的核心功能是提供美观的地图， 以帮助用户在任何城市中快速定位。</p> <p>用户期待的程序新功能是自动路线规划： 他们希望输入地址后就能在地图上看到前往目的地的最快路线。</p> <p>程序的首个版本只能规划公路路线。 驾车旅行的人们对此非常满意。 但很显然， 并非所有人都会在度假时开车。 因此你在下次更新时添加了规划步行路线的功能。 此后， 你又添加了规划公共交通路线的功能。</p> <p>而这只是个开始。 不久后， 你又要为骑行者规划路线。 又过了一段时间， 你又要为游览城市中的所有景点规划路线。</p> <p><img src="/blog/assets/img/problem.11465d93.png" alt="导游代码将变得非常臃肿"></p> <p>导游代码将变得非常臃肿。</p> <p>尽管从商业角度来看， 这款应用非常成功， 但其技术部分却让你非常头疼： 每次添加新的路线规划算法后， 导游应用中主要类的体积就会增加一倍。 终于在某个时候， 你觉得自己没法继续维护这堆代码了。</p> <p>无论是修复简单缺陷还是微调街道权重， 对某个算法进行任何修改都会影响整个类， 从而增加在已有正常运行代码中引入错误的风险。</p> <p>此外， 团队合作将变得低效。 如果你在应用成功发布后招募了团队成员， 他们会抱怨在合并冲突的工作上花费了太多时间。 在实现新功能的过程中， 你的团队需要修改同一个巨大的类， 这样他们所编写的代码相互之间就可能会出现冲突。</p> <h2 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h2> <p>策略模式建议找出负责用许多不同方式完成特定任务的类， 然后将其中的算法抽取到一组被称为<em>策略</em>的独立类中。</p> <p>名为<em>上下文</em>的原始类必须包含一个成员变量来存储对于每种策略的引用。 上下文并不执行任务， 而是将工作委派给已连接的策略对象。</p> <p>上下文不负责选择符合任务需要的算法——客户端会将所需策略传递给上下文。 实际上， 上下文并不十分了解策略， 它会通过同样的通用接口与所有策略进行交互， 而该接口只需暴露一个方法来触发所选策略中封装的算法即可。</p> <p>因此， 上下文可独立于具体策略。 这样你就可在不修改上下文代码或其他策略的情况下添加新算法或修改已有算法了。</p> <p><img src="data:image/png;base64,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" alt="路线规划策略"></p> <p>路线规划策略。</p> <p>在导游应用中， 每个路线规划算法都可被抽取到只有一个 <code>build­Route</code>生成路线方法的独立类中。 该方法接收起点和终点作为参数， 并返回路线中途点的集合。</p> <p>即使传递给每个路径规划类的参数一模一样， 其所创建的路线也可能完全不同。 主要导游类的主要工作是在地图上渲染一系列中途点， 不会在意如何选择算法。 该类中还有一个用于切换当前路径规划策略的方法， 因此客户端 （例如用户界面中的按钮） 可用其他策略替换当前选择的路径规划行为。</p> <h2 id="真实世界类比"><a href="#真实世界类比" class="header-anchor">#</a> 真实世界类比</h2> <p><img src="/blog/assets/img/strategy-comic-1-zh.a7dbf1e5.png" alt="各种出行策略"></p> <p>各种前往机场的出行策略</p> <p>假如你需要前往机场。 你可以选择乘坐公共汽车、 预约出租车或骑自行车。 这些就是你的出行策略。 你可以根据预算或时间等因素来选择其中一种策略。</p> <h1 id="go-策略模式讲解和代码示例"><a href="#go-策略模式讲解和代码示例" class="header-anchor">#</a> Go <strong>策略</strong>模式讲解和代码示例</h1> <p><strong>策略</strong>是一种行为设计模式， 它将一组行为转换为对象， 并使其在原始上下文对象内部能够相互替换。</p> <p>原始对象被称为上下文， 它包含指向策略对象的引用并将执行行为的任务分派给策略对象。 为了改变上下文完成其工作的方式， 其他对象可以使用另一个对象来替换当前链接的策略对象。</p> <h2 id="概念示例"><a href="#概念示例" class="header-anchor">#</a> 概念示例</h2> <p>思考一下构建内存缓存的情形。 由于处在内存中， 故其大小会存在限制。 在达到其上限后， 一些条目就必须被移除以留出空间。 此类操作可通过多种算法进行实现。 一些流行的算法有：</p> <ul><li>最少最近使用 （LRU）： 移除最近使用最少的一条条目。</li> <li>先进先出 （FIFO）： 移除最早创建的条目。</li> <li>最少使用 （LFU）： 移除使用频率最低一条条目。</li></ul> <p>问题在于如何将我们的缓存类与这些算法解耦， 以便在运行时更改算法。 此外， 在添加新算法时， 缓存类不应改变。</p> <p>这就是策略模式发挥作用的场景。 可创建一系列的算法， 每个算法都有自己的类。 这些类中的每一个都遵循相同的接口， 这使得系列算法之间可以互换。 假设通用接口名称为 <code>eviction­Algo</code>移除算法 。</p> <p>现在， 我们的主要缓存类将嵌入至 <code>eviction­Algo</code>接口中。 缓存类会将全部类型的移除算法委派给 <code>eviction­Algo</code>接口， 而不是自行实现。 鉴于 <code>eviction­Algo</code>是一个接口， 我们可在运行时将算法更改为 LRU、 FIFO 或者 LFU， 而不需要对缓存类做出任何更改。</p> <h4 id="evictionalgo-go-策略接口"><a href="#evictionalgo-go-策略接口" class="header-anchor">#</a> <strong>evictionAlgo.go:</strong> 策略接口</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> evictionAlgo <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">evict</span><span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="fifo-go-具体策略"><a href="#fifo-go-具体策略" class="header-anchor">#</a> <strong>fifo.go:</strong> 具体策略</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> fifo <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>l <span class="token operator">*</span>fifo<span class="token punctuation">)</span> <span class="token function">evict</span><span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Evicting by fifo strtegy&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="lru-go-具体策略"><a href="#lru-go-具体策略" class="header-anchor">#</a> <strong>lru.go:</strong> 具体策略</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> lru <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>l <span class="token operator">*</span>lru<span class="token punctuation">)</span> <span class="token function">evict</span><span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Evicting by lru strtegy&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="lfu-go-具体策略"><a href="#lfu-go-具体策略" class="header-anchor">#</a> <strong>lfu.go:</strong> 具体策略</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> lfu <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>l <span class="token operator">*</span>lfu<span class="token punctuation">)</span> <span class="token function">evict</span><span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Evicting by lfu strtegy&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="cache-go-背景"><a href="#cache-go-背景" class="header-anchor">#</a> <strong>cache.go:</strong> 背景</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> cache <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    storage      <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
    evictionAlgo evictionAlgo
    capacity     <span class="token builtin">int</span>
    maxCapacity  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">initCache</span><span class="token punctuation">(</span>e evictionAlgo<span class="token punctuation">)</span> <span class="token operator">*</span>cache <span class="token punctuation">{</span>
    storage <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>cache<span class="token punctuation">{</span>
        storage<span class="token punctuation">:</span>      storage<span class="token punctuation">,</span>
        evictionAlgo<span class="token punctuation">:</span> e<span class="token punctuation">,</span>
        capacity<span class="token punctuation">:</span>     <span class="token number">0</span><span class="token punctuation">,</span>
        maxCapacity<span class="token punctuation">:</span>  <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token function">setEvictionAlgo</span><span class="token punctuation">(</span>e evictionAlgo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span>evictionAlgo <span class="token operator">=</span> e
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token function">add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> c<span class="token punctuation">.</span>capacity <span class="token operator">==</span> c<span class="token punctuation">.</span>maxCapacity <span class="token punctuation">{</span>
        c<span class="token punctuation">.</span><span class="token function">evict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    c<span class="token punctuation">.</span>capacity<span class="token operator">++</span>
    c<span class="token punctuation">.</span>storage<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token function">get</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">delete</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>storage<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>cache<span class="token punctuation">)</span> <span class="token function">evict</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    c<span class="token punctuation">.</span>evictionAlgo<span class="token punctuation">.</span><span class="token function">evict</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
    c<span class="token punctuation">.</span>capacity<span class="token operator">--</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="main-go-客户端代码"><a href="#main-go-客户端代码" class="header-anchor">#</a> <strong>main.go:</strong> 客户端代码</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    lfu <span class="token operator">:=</span> <span class="token operator">&amp;</span>lfu<span class="token punctuation">{</span><span class="token punctuation">}</span>
    cache <span class="token operator">:=</span> <span class="token function">initCache</span><span class="token punctuation">(</span>lfu<span class="token punctuation">)</span>

    cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
    cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>

    cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span>

    lru <span class="token operator">:=</span> <span class="token operator">&amp;</span>lru<span class="token punctuation">{</span><span class="token punctuation">}</span>
    cache<span class="token punctuation">.</span><span class="token function">setEvictionAlgo</span><span class="token punctuation">(</span>lru<span class="token punctuation">)</span>

    cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span>

    fifo <span class="token operator">:=</span> <span class="token operator">&amp;</span>fifo<span class="token punctuation">{</span><span class="token punctuation">}</span>
    cache<span class="token punctuation">.</span><span class="token function">setEvictionAlgo</span><span class="token punctuation">(</span>fifo<span class="token punctuation">)</span>

    cache<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="output-txt-执行结果"><a href="#output-txt-执行结果" class="header-anchor">#</a> <strong>output.txt:</strong> 执行结果</h4> <div class="language- extra-class"><pre class="language-text"><code>Evicting by lfu strtegy
Evicting by lru strtegy
Evicting by fifo strtegy
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2021, 1:25:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/开发基础/设计模式/行为模式/状态模式.html" class="prev">
        状态模式
      </a></span> <span class="next"><a href="/blog/开发基础/设计模式/行为模式/观察者模式.html">
        观察者模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.4c58f1db.js" defer></script><script src="/blog/assets/js/3.a4fcd0ee.js" defer></script><script src="/blog/assets/js/64.32167475.js" defer></script>
  </body>
</html>
