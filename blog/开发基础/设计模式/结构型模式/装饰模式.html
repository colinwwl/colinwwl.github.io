<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>装饰模式 | 一名PHP+GO工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b3aba94c.css" as="style"><link rel="preload" href="/blog/assets/js/app.00951051.js" as="script"><link rel="preload" href="/blog/assets/js/3.a4fcd0ee.js" as="script"><link rel="preload" href="/blog/assets/js/35.124549a3.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b59a7b82.js"><link rel="prefetch" href="/blog/assets/js/100.21b8c21c.js"><link rel="prefetch" href="/blog/assets/js/101.81857167.js"><link rel="prefetch" href="/blog/assets/js/102.7b3dc655.js"><link rel="prefetch" href="/blog/assets/js/103.3e4ed853.js"><link rel="prefetch" href="/blog/assets/js/104.10bc5a69.js"><link rel="prefetch" href="/blog/assets/js/105.4ab84c31.js"><link rel="prefetch" href="/blog/assets/js/106.48a2438e.js"><link rel="prefetch" href="/blog/assets/js/107.cc68b4a0.js"><link rel="prefetch" href="/blog/assets/js/108.a8d052c3.js"><link rel="prefetch" href="/blog/assets/js/109.2cc1bd1b.js"><link rel="prefetch" href="/blog/assets/js/11.1a97fa0b.js"><link rel="prefetch" href="/blog/assets/js/110.486af5be.js"><link rel="prefetch" href="/blog/assets/js/111.cd3af9b2.js"><link rel="prefetch" href="/blog/assets/js/112.e090c894.js"><link rel="prefetch" href="/blog/assets/js/113.fb95ddbe.js"><link rel="prefetch" href="/blog/assets/js/114.971377b4.js"><link rel="prefetch" href="/blog/assets/js/115.7fea5c7d.js"><link rel="prefetch" href="/blog/assets/js/116.de4c5456.js"><link rel="prefetch" href="/blog/assets/js/117.627d5d8b.js"><link rel="prefetch" href="/blog/assets/js/118.ba1cf79a.js"><link rel="prefetch" href="/blog/assets/js/119.68167d03.js"><link rel="prefetch" href="/blog/assets/js/12.303ba226.js"><link rel="prefetch" href="/blog/assets/js/120.57de0dea.js"><link rel="prefetch" href="/blog/assets/js/121.bfa03c87.js"><link rel="prefetch" href="/blog/assets/js/122.561ef8e8.js"><link rel="prefetch" href="/blog/assets/js/123.eded809d.js"><link rel="prefetch" href="/blog/assets/js/124.96a2d5d3.js"><link rel="prefetch" href="/blog/assets/js/125.f6db180c.js"><link rel="prefetch" href="/blog/assets/js/126.f0e1e1b7.js"><link rel="prefetch" href="/blog/assets/js/127.23ea403b.js"><link rel="prefetch" href="/blog/assets/js/128.0214b1f1.js"><link rel="prefetch" href="/blog/assets/js/129.02f2c2a5.js"><link rel="prefetch" href="/blog/assets/js/13.36c21e62.js"><link rel="prefetch" href="/blog/assets/js/130.a7c917b1.js"><link rel="prefetch" href="/blog/assets/js/131.9c909898.js"><link rel="prefetch" href="/blog/assets/js/132.4218bdf5.js"><link rel="prefetch" href="/blog/assets/js/133.bffbfd91.js"><link rel="prefetch" href="/blog/assets/js/134.809e389b.js"><link rel="prefetch" href="/blog/assets/js/135.c8528c36.js"><link rel="prefetch" href="/blog/assets/js/136.1d13c0e3.js"><link rel="prefetch" href="/blog/assets/js/137.b09b2b7d.js"><link rel="prefetch" href="/blog/assets/js/138.0caa5790.js"><link rel="prefetch" href="/blog/assets/js/139.844b9623.js"><link rel="prefetch" href="/blog/assets/js/14.5fcdcf70.js"><link rel="prefetch" href="/blog/assets/js/140.b9e96587.js"><link rel="prefetch" href="/blog/assets/js/141.af882bd0.js"><link rel="prefetch" href="/blog/assets/js/142.880d8a7d.js"><link rel="prefetch" href="/blog/assets/js/143.2d714249.js"><link rel="prefetch" href="/blog/assets/js/144.dc000941.js"><link rel="prefetch" href="/blog/assets/js/145.68228f4e.js"><link rel="prefetch" href="/blog/assets/js/146.83171f6d.js"><link rel="prefetch" href="/blog/assets/js/147.20c2b85e.js"><link rel="prefetch" href="/blog/assets/js/148.716b7ffb.js"><link rel="prefetch" href="/blog/assets/js/149.bbcaff87.js"><link rel="prefetch" href="/blog/assets/js/15.9f5b79d0.js"><link rel="prefetch" href="/blog/assets/js/150.2cfeb60d.js"><link rel="prefetch" href="/blog/assets/js/151.c8e8889f.js"><link rel="prefetch" href="/blog/assets/js/152.0c5c1d81.js"><link rel="prefetch" href="/blog/assets/js/153.44ee71a3.js"><link rel="prefetch" href="/blog/assets/js/154.dc02b6b3.js"><link rel="prefetch" href="/blog/assets/js/155.1dd48850.js"><link rel="prefetch" href="/blog/assets/js/156.498925cb.js"><link rel="prefetch" href="/blog/assets/js/157.f6b3989f.js"><link rel="prefetch" href="/blog/assets/js/158.cda04b40.js"><link rel="prefetch" href="/blog/assets/js/159.9a6b5649.js"><link rel="prefetch" href="/blog/assets/js/16.78e99664.js"><link rel="prefetch" href="/blog/assets/js/160.70593682.js"><link rel="prefetch" href="/blog/assets/js/161.e86669e6.js"><link rel="prefetch" href="/blog/assets/js/162.14b724fa.js"><link rel="prefetch" href="/blog/assets/js/163.5efb49e5.js"><link rel="prefetch" href="/blog/assets/js/164.7b79d6e9.js"><link rel="prefetch" href="/blog/assets/js/165.a91831fd.js"><link rel="prefetch" href="/blog/assets/js/166.9bf9d4df.js"><link rel="prefetch" href="/blog/assets/js/167.5653e295.js"><link rel="prefetch" href="/blog/assets/js/168.305d6c4c.js"><link rel="prefetch" href="/blog/assets/js/169.1e7bb107.js"><link rel="prefetch" href="/blog/assets/js/17.4a056dce.js"><link rel="prefetch" href="/blog/assets/js/170.59428d51.js"><link rel="prefetch" href="/blog/assets/js/171.3fbed663.js"><link rel="prefetch" href="/blog/assets/js/172.b01e9b0f.js"><link rel="prefetch" href="/blog/assets/js/173.550111a5.js"><link rel="prefetch" href="/blog/assets/js/174.0f6ca520.js"><link rel="prefetch" href="/blog/assets/js/175.9fc6896e.js"><link rel="prefetch" href="/blog/assets/js/176.80b407cf.js"><link rel="prefetch" href="/blog/assets/js/177.c02bc71a.js"><link rel="prefetch" href="/blog/assets/js/178.21d1d565.js"><link rel="prefetch" href="/blog/assets/js/179.f26bcc6c.js"><link rel="prefetch" href="/blog/assets/js/18.b1a53894.js"><link rel="prefetch" href="/blog/assets/js/180.a3e43146.js"><link rel="prefetch" href="/blog/assets/js/181.df6a3b04.js"><link rel="prefetch" href="/blog/assets/js/182.1bf0bb44.js"><link rel="prefetch" href="/blog/assets/js/183.2ad4dd90.js"><link rel="prefetch" href="/blog/assets/js/19.a5c2b897.js"><link rel="prefetch" href="/blog/assets/js/2.1e985050.js"><link rel="prefetch" href="/blog/assets/js/20.dba1906e.js"><link rel="prefetch" href="/blog/assets/js/21.33eb38b7.js"><link rel="prefetch" href="/blog/assets/js/22.6798bae6.js"><link rel="prefetch" href="/blog/assets/js/23.1f95b628.js"><link rel="prefetch" href="/blog/assets/js/24.742bac80.js"><link rel="prefetch" href="/blog/assets/js/25.36482f15.js"><link rel="prefetch" href="/blog/assets/js/26.bded1595.js"><link rel="prefetch" href="/blog/assets/js/27.aa5c03e9.js"><link rel="prefetch" href="/blog/assets/js/28.4c8b8404.js"><link rel="prefetch" href="/blog/assets/js/29.a49f363d.js"><link rel="prefetch" href="/blog/assets/js/30.ad1115ad.js"><link rel="prefetch" href="/blog/assets/js/31.17eb06fa.js"><link rel="prefetch" href="/blog/assets/js/32.0dd97449.js"><link rel="prefetch" href="/blog/assets/js/33.2df44903.js"><link rel="prefetch" href="/blog/assets/js/34.b4c3eaa1.js"><link rel="prefetch" href="/blog/assets/js/36.9a868b88.js"><link rel="prefetch" href="/blog/assets/js/37.eaebfdf4.js"><link rel="prefetch" href="/blog/assets/js/38.2acf2f60.js"><link rel="prefetch" href="/blog/assets/js/39.2799c3d4.js"><link rel="prefetch" href="/blog/assets/js/4.ede0b72f.js"><link rel="prefetch" href="/blog/assets/js/40.f1ef8e47.js"><link rel="prefetch" href="/blog/assets/js/41.5a6a598c.js"><link rel="prefetch" href="/blog/assets/js/42.6ffc0b22.js"><link rel="prefetch" href="/blog/assets/js/43.9194ea24.js"><link rel="prefetch" href="/blog/assets/js/44.c40b52bd.js"><link rel="prefetch" href="/blog/assets/js/45.d757029a.js"><link rel="prefetch" href="/blog/assets/js/46.a85207f6.js"><link rel="prefetch" href="/blog/assets/js/47.3886b655.js"><link rel="prefetch" href="/blog/assets/js/48.ddec81b9.js"><link rel="prefetch" href="/blog/assets/js/49.839e6c52.js"><link rel="prefetch" href="/blog/assets/js/5.1793e39a.js"><link rel="prefetch" href="/blog/assets/js/50.c3df41b4.js"><link rel="prefetch" href="/blog/assets/js/51.d4177a29.js"><link rel="prefetch" href="/blog/assets/js/52.bf49439d.js"><link rel="prefetch" href="/blog/assets/js/53.cb99eff8.js"><link rel="prefetch" href="/blog/assets/js/54.da2c6510.js"><link rel="prefetch" href="/blog/assets/js/55.60778aae.js"><link rel="prefetch" href="/blog/assets/js/56.e23f6578.js"><link rel="prefetch" href="/blog/assets/js/57.55c013d6.js"><link rel="prefetch" href="/blog/assets/js/58.14eaabab.js"><link rel="prefetch" href="/blog/assets/js/59.030b55b4.js"><link rel="prefetch" href="/blog/assets/js/6.d8f1e90e.js"><link rel="prefetch" href="/blog/assets/js/60.565f9438.js"><link rel="prefetch" href="/blog/assets/js/61.8119994e.js"><link rel="prefetch" href="/blog/assets/js/62.c351e7d3.js"><link rel="prefetch" href="/blog/assets/js/63.85eb95d7.js"><link rel="prefetch" href="/blog/assets/js/64.267fa0b4.js"><link rel="prefetch" href="/blog/assets/js/65.b7e1065f.js"><link rel="prefetch" href="/blog/assets/js/66.668947f0.js"><link rel="prefetch" href="/blog/assets/js/67.f204ecee.js"><link rel="prefetch" href="/blog/assets/js/68.08712dde.js"><link rel="prefetch" href="/blog/assets/js/69.956d5b92.js"><link rel="prefetch" href="/blog/assets/js/7.694ed581.js"><link rel="prefetch" href="/blog/assets/js/70.dcbf55db.js"><link rel="prefetch" href="/blog/assets/js/71.2880b991.js"><link rel="prefetch" href="/blog/assets/js/72.669b09d5.js"><link rel="prefetch" href="/blog/assets/js/73.50ae5b9c.js"><link rel="prefetch" href="/blog/assets/js/74.5bcdc0ca.js"><link rel="prefetch" href="/blog/assets/js/75.bbf303fb.js"><link rel="prefetch" href="/blog/assets/js/76.f7210762.js"><link rel="prefetch" href="/blog/assets/js/77.8774fcbb.js"><link rel="prefetch" href="/blog/assets/js/78.279c3c49.js"><link rel="prefetch" href="/blog/assets/js/79.919b8dca.js"><link rel="prefetch" href="/blog/assets/js/8.d90e6c3f.js"><link rel="prefetch" href="/blog/assets/js/80.7af53e65.js"><link rel="prefetch" href="/blog/assets/js/81.38bf524a.js"><link rel="prefetch" href="/blog/assets/js/82.9b8b2e5c.js"><link rel="prefetch" href="/blog/assets/js/83.1ae8f42d.js"><link rel="prefetch" href="/blog/assets/js/84.ffb238f7.js"><link rel="prefetch" href="/blog/assets/js/85.893a9dfb.js"><link rel="prefetch" href="/blog/assets/js/86.7493396b.js"><link rel="prefetch" href="/blog/assets/js/87.1acbb69b.js"><link rel="prefetch" href="/blog/assets/js/88.8aaccadd.js"><link rel="prefetch" href="/blog/assets/js/89.a603e3c7.js"><link rel="prefetch" href="/blog/assets/js/9.d9968690.js"><link rel="prefetch" href="/blog/assets/js/90.e1b21937.js"><link rel="prefetch" href="/blog/assets/js/91.694a3ac8.js"><link rel="prefetch" href="/blog/assets/js/92.b449228f.js"><link rel="prefetch" href="/blog/assets/js/93.fce73a30.js"><link rel="prefetch" href="/blog/assets/js/94.27fd5c80.js"><link rel="prefetch" href="/blog/assets/js/95.93d5425c.js"><link rel="prefetch" href="/blog/assets/js/96.736790ee.js"><link rel="prefetch" href="/blog/assets/js/97.fc4e3b0b.js"><link rel="prefetch" href="/blog/assets/js/98.da9aeea6.js"><link rel="prefetch" href="/blog/assets/js/99.69b22933.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b3aba94c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名PHP+GO工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/创建型模式/单例模式" class="sidebar-heading clickable"><span>创建型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/创建型模式/单例模式.html" class="sidebar-link">单例模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/原型模式.html" class="sidebar-link">原型模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/工厂方法模式.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/抽象工厂模式.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/生成器模式.html" class="sidebar-link">生成器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/结构型模式/享元模式" class="sidebar-heading clickable open"><span>结构型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/结构型模式/享元模式.html" class="sidebar-link">享元模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/代理模式.html" class="sidebar-link">代理模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html" class="sidebar-link">外观模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/桥接模式.html" class="sidebar-link">桥接模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/组合模式.html" class="sidebar-link">组合模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html" class="active sidebar-link">装饰模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html#意图" class="sidebar-link">意图</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html#解决方案" class="sidebar-link">解决方案</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html#真实世界类比" class="sidebar-link">真实世界类比</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html#概念示例" class="sidebar-link">概念示例</a></li></ul></li><li><a href="/blog/开发基础/设计模式/结构型模式/适配器模式.html" class="sidebar-link">适配器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/行为模式/中介者模式" class="sidebar-heading clickable"><span>行为模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/行为模式/中介者模式.html" class="sidebar-link">中介者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/命令模式.html" class="sidebar-link">命令模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/备忘录模式.html" class="sidebar-link">备忘录模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/模板方法模式.html" class="sidebar-link">模板方法模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/状态模式.html" class="sidebar-link">状态模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/策略模式.html" class="sidebar-link">策略模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/观察者模式.html" class="sidebar-link">观察者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/访问者模式.html" class="sidebar-link">访问者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/责任链模式.html" class="sidebar-link">责任链模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html" class="sidebar-link">迭代器模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="装饰模式"><a href="#装饰模式" class="header-anchor">#</a> 装饰模式</h1> <h2 id="意图"><a href="#意图" class="header-anchor">#</a> 意图</h2> <p><strong>装饰模式</strong>是一种结构型设计模式， 允许你通过将对象放入包含行为的特殊封装对象中来为原对象绑定新的行为。</p> <p><img src="/blog/assets/img/decorator.872a1ff5.png" alt="装饰设计模式"></p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <p>假设你正在开发一个提供通知功能的库， 其他程序可使用它向用户发送关于重要事件的通知。</p> <p>库的最初版本基于 <code>通知器</code>Notifier类， 其中只有很少的几个成员变量， 一个构造函数和一个 <code>send</code>发送方法。 该方法可以接收来自客户端的消息参数， 并将该消息发送给一系列的邮箱， 邮箱列表则是通过构造函数传递给通知器的。 作为客户端的第三方程序仅会创建和配置通知器对象一次， 然后在有重要事件发生时对其进行调用。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdYAAAC0CAMAAAAej/2NAAAAwFBMVEVHcEwwMDBHR0dISEhISEhJSUlISEimpqby8vL39/dOTk5ISEhISEhISEhISEh7e3vm5ube3t6+vr7r6+utra3Nzc3FxcWYmJhWVlaAgIBMTExmZmafn5+0tLRgYGDw8PBsbGyRkZH19fVbW1tycnKKiop2dnZpaWnX19fS0tJPT0+4uLhRUVFjY2NlZWVlZWVlZWVmZmZlZWVmZmZlZWVSUlJQUFBlZWVCQkJNTU1HR0dISEhISEhJSUlHR0dISEjnIknzAAAAQHRSTlMAA3nN+P+/////GqjotO////////////////////////////////////8m////0GxU5LbynzQQhQg/Tmqb216M/ShpqAAADVZJREFUeAHs0QVhA1EUAMF3sMfsX2wllD60yY6FCUmSJEmSJP1TTdv11NN3bROpqRmobfA1uZb62lBiHYzTXM80QheJqYdprmmCPhITMNcFhGyVrbnZaquty7pRyLYukcvOF+1v0bocFHRke+XL3qJ15bzmQq6TNTKB+UvepHXjmou52Iq02gpzQWCrrbbaaqutttpqq6352Wprfrbezwe7dqLitpJAYZgLHOQzLCrtu6pKcmmJpHszme3932xckrx0komBUacN9NdgCTBQ8ENt7hM3gR/yLoqDF8nq+fxOEH9mfSJBKrjKkAveuCh4UWZXPi9EtfEZVLvgnbOKGhXfkAr6M+svNS3O3MRAwpsWhhcdrkpeRNj09LAb3jfrWAP1wAdBByjxKlnNeZfFh47gy/OslH51Nb3NEAMTGacWkNuHR2auC9Su68oOWWTNt6xKqXTLuii1vHPWk5Mj05irhlfeglqhHV8jq0CWArM2qDEdOIIvxZ9//e1Z1hIPdMM7g7axce9spxw72cEE1j2rJPWW1SOjg7LKKYklv9dMNfKQrHIs+xZAljO64GSQa/kaWaMe6O3TYDpuBF//XhTFt69//DKrgR9vOiwwt66NyOEEVRMD0bia1k5Z1iLNLmSH3btmDVoA88RV48e0PJ0CWMxFDSA1A5uqBXRYeHRytKF8qayNQXzcCP74+u0S9h///Ncvs8rbm1APXTXqUwLlAw1Xw95pgaZllqtwz5oZs2xZXWPcY7JOSETVYuRFpHRm1qHkUFON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" alt="使用装饰模式前的库结构"></p> <p>程序可以使用通知器类向预定义的邮箱发送重要事件通知。</p> <p>此后某个时刻， 你会发现库的用户希望使用除邮件通知之外的功能。 许多用户会希望接收关于紧急事件的手机短信， 还有些用户希望在微信上接收消息， 而公司用户则希望在 QQ 上接收消息。</p> <p><img src="/blog/assets/img/problem2-zh.2b825870.png" alt="实现其他类型通知后的库结构"></p> <p>每种通知类型都将作为通知器的一个子类得以实现。</p> <p>这有什么难的呢？ 首先扩展 <code>通知器</code>类， 然后在新的子类中加入额外的通知方法。 现在客户端要对所需通知形式的对应类进行初始化， 然后使用该类发送后续所有的通知消息。</p> <p>但是很快有人会问：  “为什么不同时使用多种通知形式呢？ 如果房子着火了， 你大概会想在所有渠道中都收到相同的消息吧。”</p> <p>你可以尝试创建一个特殊子类来将多种通知方法组合在一起以解决该问题。 但这种方式会使得代码量迅速膨胀， 不仅仅是程序库代码， 客户端代码也会如此。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAABuCAMAAADIxzC7AAABj1BMVEVHcExGRkZISEhISEhJSUlJSUl6enrj4+P39/fw8PDV1dXOzs7f39/z8/Pr6+vd3d3b29vMzMzY2Njt7e319fWgoKBOTk5ZWVnFxcWpqalubm7JyclfX19NTU2VlZV9fX3IyMhra2vo6Oi5ublKSkpTU1OlpaViYmJVVVWcnJzR0dGMjIySkpLm5uZycnKxsbHCwsKIiIhcXFxnZ2e9vb2EhISjo6NRUVF3d3e2traYmJivr6+/v79kZGSPj4/h4eGAgICsrKyenp5HR0e5ublISEhHR0cjIyPl5eW+vr5ISEhCQkJnZ2dISEhISEiOjo7h4eFMTEzy8vJKSkpHR0dFRUXy8vJmZmZJSUlISEhJSUn29vZsbGxJSUlISEg+Pj5LS0v29vZHR0dISEjExMRISEjt7e2YmJhISEhubm7w8PD29vaioqLg4OD19fVJSUn39/doaGh6enqFhYX29vZKSkqkpKT29vZbW1vT09P19fVmZmZycnK1tbWfn5+Tk5PPz8+WlpZVVVXe3t5XV1c5dnnEAAAAhXRSTlMAGqbn/+7/////////////////////////////////////////////////////////////////////////////////X+riSQMmsaARzr1+1Q20xlQoIFyj966VNvPUywgweDlD7IdM7nLsGOpS8WX8opvEqpVY8a3p28zt7JRv1PjC7WzcJ2NXPQAAC3NJREFUeAHs0YEJRCEQQ0HVfLX/iq+JBZZjpoJHMv4QAAAAwFw7Lew16/ui70sb36zu0zdWzn0t3JNV3adv7NzXxM2u7tM3ktdGUt2nz4AONqCDHexgBzvYwT9izGw5cSyLoi8r7C3SV2Aho8xrxChmMwiBBYnH+v+P6lYDilJGqCerKo/ns3nYZy3Pv0ewU/t2Z8pjt15ruH83QFO/95oqHd/4l8cZ/YdHVdyvnFx5bsxvFfzQAoLvZfEPAGztbxX82AbCjsrG0lU2NeipdDr0q+9XTq4s92DwGwUPIRpBoywfE00CmJp8M5j1jTRfPP1lgpcjGEU8qGz6kHHV6t8KfsoEr7ubyvuVkCvJSwQXCBbgVis4ZuvKHapccJK9opZv7sFk9Lp/meBN5s9slv9O8MRI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" alt="创建组合类后的程序库结构"></p> <p>子类组合数量爆炸。</p> <p>你必须找到其他方法来规划通知类的结构， 否则它们的数量会在不经意之间打破吉尼斯纪录。</p> <h2 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h2> <p>当你需要更改一个对象的行为时， 第一个跳入脑海的想法就是扩展它所属的类。 但是， 你不能忽视继承可能引发的几个严重问题。</p> <ul><li>继承是静态的。 你无法在运行时更改已有对象的行为， 只能使用由不同子类创建的对象来替代当前的整个对象。</li> <li>子类只能有一个父类。 大部分编程语言不允许一个类同时继承多个类的行为。</li></ul> <p>其中一种方法是用<em>聚合</em>或<em>组合</em> ， 而不是<em>继承</em>。 两者的工作方式几乎一模一样： 一个对象<em>包含</em>指向另一个对象的引用， 并将部分工作委派给引用对象； 继承中的对象则继承了父类的行为， 它们自己<em>能够</em>完成这些工作。</p> <p>你可以使用这个新方法来轻松替换各种连接的 “小帮手” 对象， 从而能在运行时改变容器的行为。 一个对象可以使用多个类的行为， 包含多个指向其他对象的引用， 并将各种工作委派给引用对象。</p> <p>聚合 （或组合） 组合是许多设计模式背后的关键原则 （包括装饰在内）。 记住这一点后， 让我们继续关于模式的讨论。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdYAAAC0CAMAAAAej/2NAAAA81BMVEVHcExCQkJaWlpNTU1PT09HR0dHR0dISEhHR0dMTExJSUlISEhISEhISEhISEhISEhISEhISEhISEhKSkpISEhISEhISEhISEhLS0tISEgVFRVISEhKSkpISEh7e3vk5OT39/fp6ene3t7Y2Nj29vbz8/Nvb29ZWVmdnZ11dXVQUFDDw8NsbGxTU1OVlZW5ubmRkZHh4eG0tLS+vr6NjY1hYWGoqKjV1dWjo6NNTU1dXV2CgoJmZmZpaWnLy8utra3IyMiHh4fR0dHv7++ampplZWVkZGRmZmZmZmZlZWVlZWVlZWVlZWVlZWVlZWVmZmZlZWVPUxWAAAAAUXRSTlMABUEbJDRIlVkU/3D6iM7E2n23KvOg7WUMqQFR/+X///////////////////////////////////////////////////9TN/fhz76ql4Nz7GN9XokJAAAYSklEQVR4AezX2dKcKhSG4U9pBJdIA4qo/ZM593+LWyqmMw9nm3Svp8r58FUBPA7GGGOMMcYYY4wxxhhrWoFTe0HtmOxOP43VKA0UPQ04mRHo9Km2xExZa69wxhgqm/9p1kADJneg+djFz1ktnTxYXYKLdoFTqXG66+afB1oDpT6lNNB27Lt7VivlEmXHWWuzh4ihZHU3pzf1i6xogsQYQiAXtjChj/HFxc5egawgqsvKPmcdoxvmqWT9leT9SMF7L9BbS4u9VZ+Vv1aZnB+bn2aVMUYFPQyDpzAcLudPuPas/LX+bvLTOjdnqOud5Kz/xtcqD6SOncBPxQxM6RONwoyTtE7rOehUaVb+Ws/pUAi3X2f15Io5A1hvxlCodYHD9mCHsMDHGMkeu+53WVGoDHSGyCZh7VS01WVlgYiWpiBf9juAi15/mtUULxkQ8XaOrcV+m1AdHluBSHcSaDKFH7NOnqZiyyjuWQsBVpdBA5Bq1IP2aQu6B/aFTINvxEUZRapwP2btTQKrkL3quZ+TNxIHYfOPv+rR/5D16lCgJQ1Wn0TdhaRyjbV7ybpEfKM18w2eAKzrlstBlKyRgiqcEWDVWeeA3WhJl4464LbkHl/bhZ3wKaslCgA2ogRcQl4Km8AqJAUg1/3YtzswqB7f2QFMuuy6dkU5l2CPZ9/xN8SW6bHlTeDZiIUe3/J0XTd69frNY3v9ijY8mUyPXbV4TRlPhujN4yPCk+CsnJWzclbOylk5awPR41trD6yc9Z/NunajtatRYptwEKqIbQ4QLqLoVIMf7drI/yHr23fvX3/46vrDx/Pq48fy9PWxu18/bdZhc0QvdhRznPJSMk3Xw0JpoCG7CYWnsELRqccpkfyPXbtcbBSIwjB8ZvEPiBFBm4krdYvUe//XtMOEZa3yj+pbd3lwzl/fyS6DdQzRZPobdooZz+oCfd6fxwu+awD0vixrq9oy5O3SJCC13VaJmKGR0q4xVkPVsqpu7sp0V1Z9jjVAUAbrEnEKYP8Z1hgH36wyDZF4XmuI15odIqvq2A3o4i2n4dWSnZxb9WmX/RxrC61yWA95d4l0+CQr7x3xb9aCNZ9gkWKhC1R1UQBUFJKFjF5jNWCUxcqPgZPxWLwcnwrWs7307DxnHY8v+OVytd70BOv5dnV1wfn1LJ3PLvjN+Hg2uf0SrL4jQpw9g5MlzKwGapBVUNOJ1JZIeZK1Vc/qUJYLtzTWO6xugSG/xFKwAjGwkKxD4PYauFqnowFkM34fI00xeZhCdPElWJlQMRCI5xW4dRELzSS2mSJjHQeB4tVqbXjEVJn7J+uuJPe2y2E9u7sCNn+wpv3uGpuC9RLpEe9xwfr4cIqUbzB+eFjhforVoj/6YhvhOlSyA4tMVOygSGs4P4jIFKzaE0fCui/L3+qUwyqKNw9/sM6y1XdcsN7HiPfud/vWE8R8i8lstsJCfiL/SqyqqZuINKcREkUsQiOQ1aCQSgWrYYqCv/etYTEnEcEsh3V2ctvl/BYY/WbdYFaw8tsxMD+SrAvBeobtnaj/pVgt3YADGB7cWmLlQBrJXMFKBeuOTdHZ04dMOvTS9q2ie+B+NM5Zuyn2u8C9ZB31+AVwULDuYTbkwx4vl1UJkrcbt9ESiBodTw59/6Cc1dZlwROsoqdZ1ZZaJmsvxmoOnAmt1XIl1k7xjslpxno8n80QF2ureMJkbz0rl1Vpv+W4jV91Ix1R9loFdSJvx1pkFaz+L1bfe5pVVA7rPpdNgfTgbDU8TgFsrznfALOM9SbTPueS9RYrzs9XwOpuVCarnPd523Ebecik1eTob1MnotCvBEwUJD79YrWTOszi059irSduuZf6u4MRzxr2Bj35Sj9/x6jf5381GhRHwGWxJui+8biNcGKu07SThFn5/tF1VCLVcQsyoNaBWex5mUywsl1ExBw4rFTWouE7vIMDvOn1rdBTO4gaqHhkomVDpY5t24Z41W6gbouIyK/B8D1U7Y6o4vgK/kmVm53W942598LK2oCjanUmYVAhajf/qp19UtUkCgPInDr57j9ZJPLpm/W9sJJuRgrtCvWORU8WknRTstj3bfT3w1pCP9m7w6ZUtb4N4LvqftH19rxxHAb+CICiiKKgAIqIlpma3//TPCCsg56yU3ftnn3buubUca/WntrzGwDtci3OylkvIZyVs2qNqZISvauSI0uHLs+fy/oT3qzxLtaZC8Dv0nt+yX9o7kSI/1zWn/DWqnewqrIFWALG72MVYJP7J7P+hLyDldrAjLS29C5Wkvv0v8DKWQcolTx9QZTotgIMAyORSRoGZjQmrekK1pBC3Y5cNW/uuBAnlj4nkpLAjxxq6N2u0T1l9ZfX9zdX387KT8IssgXoA5VoiJBoAk8B4AMJ9WB2rPx/EISEXACuCszyRz5gpVoEwcgGFGRZnLK6UZ6H1eP6abPdLb+JmN8yVZkHADryMWusJfDVCcJUk1MfoZxK5KKjNEpWURsAgwEERQ3RVYBuQz5ltZ7Wj6uH6CjPmfABuM6f4HzPExwnAlrHrDK1AWkBWD1ZySWpvKKWrDFpJrwmhFYrQPLKxRgoX/y7v17ut5unY+KH1Xqz3V/ffv3xy1lPoybw0yHEitUGZG0cAK0RoLxkTX04TVhJFvsM6+kKLfW7v673uwz4+ej4fdou72uc9XewaoOU0gSWuoCrKWbBqoUwSFbVJiABPVKlU9acfe5AkIhkepOVpQK+ur3ODuD16uFId39/96WsnHUAIRCAITmAJQBNBXANICbREF3oJAKG0TphtQ5n7dSC39JN6Z2sFW/5cXO/3z49/q273uyWt/WvYeWssQXAH6aUdoBogKQfADA9VRUBQZ+TpAM4Zg0FQAhlomk+U1c+yFqlMLzLddm5+eHx6RO4nLWKKs2VtCjg9NkbOvsqZUmVgksenbJpffYasjRKP/1yRGl4d73PzswMd7O7rn09q6rS2WgykarRG9E0Vc0++G9wPp5adugy3FV2R3XzpazukM5GtFJqWnQ+DhCOgSFx1v8ed1NedJ/Xme13sI5DjRZvsKoOBvNG2+Cs/3Xqh1uq2+V2/VzYPu3ur34jK8vi7aM1JaKIs34m7KJ7w2yz6+3Lw7Z+/VR768lbLxBcmxZJThZmrK2WGSw0Nk5O5JshNTpxEKhjMZtjdg1L7BOlvcCPBkSi17FmSmiaev/LWXk74jY7J5eX29PDtr6KVvfn/20Oxm1vRsmE6PDJRThI4LHxATqOHdMIRjOmXpCxInI8UycKzaat+w1yMfRk0bAH3fQTrBdf//5EatfssF3v7uuM9eYxetj9k1VTFKVBWTzMKUvFOlGJog4b102NsozgEBWsgkLURF9Cl2gOm1yRiDqRTETqp1gv/80an0idHbbZxfavgvZqE0VPtVPWBgCDsvQDQZwds+YmQ4ONGyIVrDPGahFRG9MprCAIEBd/wRasXv8T19ZLf2vV51nz/26Wm1VBu7/NB5fP7ETMWNV+vy9RnjSO4PyDNQnYuDV8jXWA+QzeNItc3mM1Fpb1iWvrZb4R8utxM9r9U0G7WdZ+3ayjaFc/c9+gua38+CS1ExWsWiCy8YmrvsLaE+Q+xqe3ziM4fxTrBed2//RcXGr/2kbR+u4VVtsZtf2EYnijRHAzJX1qdzBl4x6S6bR5zOoPZonQI2qZsdLuqQVrs60sMOCs35b6/XYdZVmtso/rl6w9AYgalE6ATtsiSnwgGBAb14YCoKcVq20AZjclkloAxOIknLoAEpWzfqtsbZkftHm29X+yUqr01cPFVmavf8vVOHvV+7QHrZYPGimxSPkslbN+U1j/YrcuXNd3AP22cNZvyu60LRU9r/3fx6o6SOJ2Yv12Vs76d7dxv7z+6+7q976CNgtDbxCGMWf9vanf3dSOntDW+TLRlwLL2xEXGc56QeGsFxn+Zo3LD39r1eUHPyGc9QLCWflJ+HLCb5kuP/wJDmflrJyVs3JWzspZOStn5ayclbNyVs7KWTkrZ+WsnJWzclbOylk5K2flrJz1U+GsvVClhajRuJXSxYSzRqZGui9TS5DoUsJZ1VQmOnxcgipnvTf5tfXSUts/Pgic9bJyv3mIoi046yWtH7F7jLI83HHWy8n9U7nWwJY/b72U3B0O1HX+6bnGWS8i9ev8QF1tbzfFwcpZL4N1FUVPy/rVU/SwyQ7Wf2ctVtpni/KnI7YJARs8n3ziua9LL78P/cumAOqZL3DWPLtttrpibR093z9Gu3e8JszWMhygQepQAKATy5sr9TsYlIvovUwaOHQaNvPspgCvLkPe1TXirCw3j9Hqdhmtrj7IOkDSnsXx+5Z0n7ZGZ7GGQfoR1nGovc6q+GPOynK7ih5v6sXBWrHG3r+yipb2gZX6z2NJgnN+5oc2DehZKWc9pL57iNa1X+XBWrEmIpWZhpEVDYi08cRyc1YpCawADepiTod0nMOnaqV+RxeM4WHBfsFwivX65xMlwxpGftSmwxr/RlcrF/lvZhjlcv5sUwA2sxxnmwLE3cTq0lisNg0gpWWZrQYV32QEh7PmyS6p0frqV3aw7n+dYbWHTjzxUxoKoj3GmNLA6g1CNEix/K5EWYRx8Ymt1C+bYtvxiEIhGXjTYr3+KeYZlj8eREKfBgjtHrxykX89JCqX82frUbOZ5TjbFGAB3ZtSL6g2DZCtKPYMnYpvQkbyc5eJrnK3iaLVMnuwLw5Wxhobhi8YhkcsNhRZ6BYn4Rjz4iRMjRD+QqtY2Ur9fSxUIpKQUJZivf6CdUykwCM90IiMsFjkXxPGbDn/ipXNLMbZpgALXybKWdmmAcUP0xXS4ptQGP3IRd1PcrV7jh62tfzRKtqfrNVv2/rEthXKo7abPRGNKdoFa8+kkvUAm1SsbKV+ChF5KU3hsOsgY50Rkdkjww+CwG8VAzKccjn/ipXNZOOGyC7eJSvbNKCHIAgssNXje8aP2oLhDGq0vi02Zlg91n+dOwmHQrgI0Z9hWrAOrYqVKBHkU9YB5qTOQog0w+wVVtVfkCVOsyjFgASHLedfsZYz2bg1fI01CWhoTvOoJWvX+GkbppymlqM+Ltl901XGe4ZVxoLIhqTAI2pgTGP0icaMdQyZrF7xFbZS/0EAcgPNV1jzY7gzUasb3hQeW86fbQpQzSzHJ656yso2DfDYz1GwJtHlb290PncH1Ou3/m1pyh74UdsxIKmRNZjpGNMIraljQaGFN5sf9jLSjdksEpp/r9TfaM7n+qE2Eyu2fczanTeNICUHw/m8Wx6tFCRsOX+2KUA1sxhnmwIw1mrTAMmP2krsMNZJ+ENZ2S9sMtR6/V3/NseEFZtTmgeAOOwReT5Mz5iqOrKEEtHMgj9cDP9eqb9tAaZN1JgA/pixjkiaAEKrQaQtfMCdlqxJoLLl/NmmAGwmGy83BWiWrNWmATTLv+e4ZJWF+OexsgpEFEVPGeq7C6WapJGmFgv2a1o+0CgGZKVcjz9V0pOV+rWGop0s2M+i9bXygSITSxuzcjn/4nsczWTjLzcFUCX2Z6mcmSX25Z/IWr/OKxDP2xt2pP4RPWE1atGXJA2G9JNYmWm+g8Z6efWn1b+ngk1fkUUg/zDW+v1hA7LH7e2f2Opvy/QVUeb0laxaY6qkx3/W6GxkiUjV1G9lrS0PpqvtPX+zxvtZZy4Av0ssCiDTmTRMoU0R4u9hZftSvdOUs1ZRZQuwBIzfxyrAJvdbWE93kXvXfM5apQ3MSGtL72IluU/fwnp1vzuQRqt8z8df9Q+yctYBSiVPXxAluq0Aw8BIZJKGgRmNSWu6gjWkULcjV9X1EbkQJ5Y+P/zm0o8caujdrtH9MtZ6vh36Q7n57i0b/VZWrTHva1RFVd+YK59vQaUysXyqLyV9nFW2AH2gEg0REk3gKQB8IKEezI6V/w+CkJALwFWBWf7IB6xUiyAY2YCCLIuvYK3d7zfFTtnR42bPSL+d1TYAWMpbZYaTatLZFtSwRSyf6UtNTeXDrDQPAHTkY9ZYS+CrE4SpJqc+QjmVyEVHaZSsojYABgMIihqiqwDdhvw51rv7/fZpFR2yWm+va/+Pb1tu+BNnOuhp72Mdh9q5usyMGX2yL6V1JuqHWUlzIqB1zCpTG5AWgNWTlVySyitqyRqTZsJrQmi1AiTVxfjjrLXb68zzsazlPzxudtd3xYbKn2ONvc9s/Th7R/XoHVi6SCyf60tN0f44K5GawE+HECtWG5C1cQC0RoDykjX14TRhJVnsj7LW890597vN07ra0fH58Wm7/OuK3Rt9POd+MVcUiFhnqNFpd8yJ0g18MaV80BD7FIoqkdzx2KQpupSHVZOq6pHWCwTXZtWkoso0FqlqQaW9wI8GZTVJQZv1omYTKcOZSC/6Utm39CeN832p8sd3xY+yaoOU0gSWuoCrKWbBqoUwSFbVJiABPVKlU9acfe5AkIhkeo3VXx5lv9/vdtvtZvP0tH5cPUdHeVitN7vlfe0XO0S/mrUoELHO0Ajm2LaEiTNGTLJljB0j0DzMiGIobJLWQmt61GGpqkcOxm1vxqpJRZWpFxCxFhSFZtPW/UZRTfL8lPWiBmhQ/umffSnZMprtbnq+L1X2n7qm9uE7YSEQgCE5gCUATQVwDSAm0RBd6CQChtE6YbUOZ+3Ugt/STek1Vjd6I8/57pzb3fL6tsY0P59Xu0ysQMQ6QyPEREMoREaP4pyzDTu1RKKoRWwSpU0LrarDUlWPPMyralJRZSpYyxaUhC7RHHZxdIUTorIXVbGe9qVitN/uS5X9JxvKB1ljC4A/TCntANEAST8AYHqqKgKCPidJB3DMGgqAEMpE03ymrrzGaj0dZ7PZbLe73X6/vL6/qTHGL8/LLhO7mrHO0OHS1TSJKEqolwlSijF1i6oTm0REqWcacsXKqkf9QBBnrJp0tFU+a0FNYQVBgLj4Cy2RqOxFVaynfamekL7dlyovxlNMP8hKqjQvXhLWlD7bF/x053B5dMqm9dlryNIoffMZcz3LqeLnD86PnIQZK+sMVayTjDX/ioQm9YVe4qrEJhXFNjj/YE0CojSOsnFr+BrrAPMZvGmWsnGmi0RlL+qUtepLDS16uy9Vss4xvfzSy8dZWWfohNWDQmTDJgoNKy4nsTQQs2pSVT3KorktVk2qWFkLqo/xEZOos6u7PMtZxoy16kuNMXq7L1WytqFw1rLLVLGyztApq+RPpo5rpURzWGk1qd0bzAcTs8GqSVX1yHZGbT9h1aSKlbWgqGXGSrunFkwLU2O9KEkQR46J0T/7Un3BbY+a/fN9qZJ17Guc9cXrOqwzdMpKbQMIipug7tGksQ8gmhGrJlXVo54ARA1WTapYWQuKpBYAUS6Y2pgT60UtAGPgzl70pWwLMKbn+1Llj99q0f8M69Wvm7vTkdp1NnA+//lPPqeWP7y9eS8rnXaGTtOXKI8qp8eTtEbZTFL78mn1KFVO7zpYWAvqpP6UWkPWi8rH1Vf7Umrj/9q3bzU5YTAKw4cMB0nkIBg6Z5d26cp7//dkDWxeOSftPHoLUvtN+En7vv15KcvbW25nnVOp1CyySHfYLXMAdMzxDVULFKOG0YrC+Ts45mfBzKB/wsfXL5/B49+NrsmTklE/dNuY4Czh+kNZIZkC3SnDWalLh7NefTJT1h/w+fT+ObysMVRDtgfcNOJxjB9mXdbkW1mLXgO6j3CmqR3Ouj+d9AdcfXgur1btFVG3QNJP97JO6zCygkWglOhVU9Ws65qsMxgDB38b3aEXIY+sqgJQ3B4oGpLjsLXWrFqLTU9yGAZRm0UJI2PmszpiFgZP5wXFWbFn1dWJ1GEA1cIq4jbjrNa4Jiktc8NF2wcXFwVN02TUZqkoGyNYQlmTqsmZH9WsJnLAHMfx1prFAqNkaZ8bLtc+uLjq+BFuGKPUBSYKxfxmEh4zIOkfSYGWPdOc17qj9GSfGy7ZGLmcNc5NozUR7YIon+8m4YIN0LWPJCgEzTpK03SszGKGsTK3zw2Xa9POVi3SjILMOsp6Kx6dt05cYdOMqk06GLXGgl3KFG7wko1GO3VYRooQD7JWgnUAi6jPqhZJboxVbswA4iGGG7ygkmvKFcCs9h/c+1nTMi+S1RI2F5HJmvFWBM/JkSmpyQno05sDhUxglLZkwQSTdS6MTRfGAqDZJJziswZS9OW2BQVTAB0b3ND9AhuT9eF5ayAoArjBW7p44tpSdcg5lIwBzP3WlIeBA34sKzQHOMILRlLESRPsYahwtqqeh1FHP5oVM5zhpfka4bCkU4FrywFfk6bYrSEujOd5nud5nud5nvcFWdlQB7+cF6kAAAAASUVORK5CYII=" alt="继承与聚合的对比"></p> <p>继承与聚合的对比</p> <p><em>封装器</em>是装饰模式的别称， 这个称谓明确地表达了该模式的主要思想。  “封装器” 是一个能与其他 “目标” 对象连接的对象。 封装器包含与目标对象相同的一系列方法， 它会将所有接收到的请求委派给目标对象。 但是， 封装器可以在将请求委派给目标前后对其进行处理， 所以可能会改变最终结果。</p> <p>那么什么时候一个简单的封装器可以被称为是真正的装饰呢？ 正如之前提到的， 封装器实现了与其封装对象相同的接口。 因此从客户端的角度来看， 这些对象是完全一样的。 封装器中的引用成员变量可以是遵循相同接口的任意对象。 这使得你可以将一个对象放入多个封装器中， 并在对象中添加所有这些封装器的组合行为。</p> <p>比如在消息通知示例中， 我们可以将简单邮件通知行为放在基类 <code>通知器</code>中， 但将所有其他通知方法放入装饰中。</p> <p><img src="/blog/assets/img/solution2-zh.9283a54c.png" alt="装饰模式解决方案"></p> <p>将各种通知方法放入装饰。</p> <p>客户端代码必须将基础通知器放入一系列自己所需的装饰中。 因此最后的对象将形成一个栈结构。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbgAAADwCAMAAABFaIE0AAABa1BMVEVHcExLS0tISEhISEhJSUlJSUl6enrj4+P39/fm5uapqanr6+vt7e20tLSmpqa9vb319fWvr6/w8PBwcHBLS0tgYGBaWlrp6em6urrGxsZNTU3g4ODy8vLX19fZ2dne3t7z8/PDw8PAwMDJycnPz8/T09PMzMyOjo6dnZ2GhoaxsbGTk5N0dHRUVFRdXV1mZma3t7etra3i4uLb29tsbGyjo6OYmJhpaWl9fX1YWFhQUFCampqBgYFjY2OKiopWVlZlZWVmZmZkZGRRUVFlZWWgoKBlZWVmZmZkZGRSUlJmZmZlZWVnZ2dlZWVmZmZRUVFjY2NJSUlGRkb29vZJSUlISEhJSUlISEhISEh4eHj29vampqb39/dJSUmcnJxJSUlISEjg4OD29vZKSkpbW1vb29vW1tZISEhISEiOjo6mpqbw8PC0tLT39/dVVVX29vb09PRYWFh9fX19fX3z8/PAwMCMjIzQ0ND29vYuAYQTAAAAeXRSTlMAHKbm/+3///////////////////////////////////////////////////////////////////////////8KovVCA///suOBI9rBZZvLLVA1FGqzkPxawZg3vb954PVG8qXO6JxTadz7Stdt3/LrFZyz3CqbmeWw/5ii1wAAEuxJREFUeAHsnIl6oujWhU91raPLmSBKRFEccIgiJmpUSlKdSlJz1Rnu/2J+NdGEPKk63V2iD/3vtwfzpYcP1su4wf0PQRAEQRAEQRAEQRCeILz67TXC5PVvryTkMLz9E2HzTzEXAr8hFmeYxGP4TWLeP68RZ7jE8Vpi3j8AwwaQmEWcIOJEnIgTcYKIC6EyEUJpYr/iEskUf0o6k80p4Ys7Zn7hVia2pYk9i0vihI+o5HPyWqEYvrij5hduZWJbmtizOP00zR0lo8xn6MiywjDFHT+/cCsT29LEnsWppspKlbVcyWIii7qZJuONXJysVCvNpt5A0tSZatVtrlDs00aCTLdP7b2JO35+AEMH2Ju4Tpe9MzZh00YPQF7pA0CDSQ3QTmljAOcEAJJJA0CPTMcAFGgPN0M130y49v7EHSa/yIurIzNC6UFcsZXooaWfo3WhjrVeeewOaWNij9NNnFyodkNP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" alt="程序可以配置由通知装饰构成的复杂栈"></p> <p>程序可以配置由通知装饰构成的复杂栈。</p> <p>实际与客户端进行交互的对象将是最后一个进入栈中的装饰对象。 由于所有的装饰都实现了与通知基类相同的接口， 客户端的其他代码并不在意自己到底是与 “纯粹” 的通知器对象， 还是与装饰后的通知器对象进行交互。</p> <p>我们可以使用相同方法来完成其他行为 （例如设置消息格式或者创建接收人列表）。 只要所有装饰都遵循相同的接口， 客户端就可以使用任意自定义的装饰来装饰对象。</p> <h2 id="真实世界类比"><a href="#真实世界类比" class="header-anchor">#</a> 真实世界类比</h2> <p><img src="/blog/assets/img/decorator-comic-1.ba095e61.png" alt="装饰模式示例"></p> <p>穿上多件衣服将获得组合性的效果。</p> <p>穿衣服是使用装饰的一个例子。 觉得冷时， 你可以穿一件毛衣。 如果穿毛衣还觉得冷， 你可以再套上一件夹克。 如果遇到下雨， 你还可以再穿一件雨衣。 所有这些衣物都 “扩展” 了你的基本行为， 但它们并不是你的一部分， 如果你不再需要某件衣物， 可以方便地随时脱掉。</p> <h1 id="go-装饰模式讲解和代码示例"><a href="#go-装饰模式讲解和代码示例" class="header-anchor">#</a> Go <strong>装饰</strong>模式讲解和代码示例</h1> <p><strong>装饰</strong>是一种结构设计模式， 允许你通过将对象放入特殊封装对象中来为原对象增加新的行为。</p> <p>由于目标对象和装饰器遵循同一接口， 因此你可用装饰来对对象进行无限次的封装。 结果对象将获得所有封装器叠加而来的行为。</p> <h2 id="概念示例"><a href="#概念示例" class="header-anchor">#</a> 概念示例</h2> <h4 id="pizza-go-零件接口"><a href="#pizza-go-零件接口" class="header-anchor">#</a> <strong>pizza.go:</strong> 零件接口</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> pizza <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="veggiemania-go-具体零件"><a href="#veggiemania-go-具体零件" class="header-anchor">#</a> <strong>veggieMania.go:</strong> 具体零件</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> veggeMania <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>veggeMania<span class="token punctuation">)</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">15</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="tomatotopping-go-具体装饰"><a href="#tomatotopping-go-具体装饰" class="header-anchor">#</a> <strong>tomatoTopping.go:</strong> 具体装饰</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> tomatoTopping <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    pizza pizza
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>tomatoTopping<span class="token punctuation">)</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    pizzaPrice <span class="token operator">:=</span> c<span class="token punctuation">.</span>pizza<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> pizzaPrice <span class="token operator">+</span> <span class="token number">7</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="cheesetopping-go-具体装饰"><a href="#cheesetopping-go-具体装饰" class="header-anchor">#</a> <strong>cheeseTopping.go:</strong> 具体装饰</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> cheeseTopping <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    pizza pizza
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>cheeseTopping<span class="token punctuation">)</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    pizzaPrice <span class="token operator">:=</span> c<span class="token punctuation">.</span>pizza<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> pizzaPrice <span class="token operator">+</span> <span class="token number">10</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="main-go-客户端代码"><a href="#main-go-客户端代码" class="header-anchor">#</a> <strong>main.go:</strong> 客户端代码</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    pizza <span class="token operator">:=</span> <span class="token operator">&amp;</span>veggeMania<span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//Add cheese topping</span>
    pizzaWithCheese <span class="token operator">:=</span> <span class="token operator">&amp;</span>cheeseTopping<span class="token punctuation">{</span>
        pizza<span class="token punctuation">:</span> pizza<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//Add tomato topping</span>
    pizzaWithCheeseAndTomato <span class="token operator">:=</span> <span class="token operator">&amp;</span>tomatoTopping<span class="token punctuation">{</span>
        pizza<span class="token punctuation">:</span> pizzaWithCheese<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Price of veggeMania with tomato and cheese topping is %d\n&quot;</span><span class="token punctuation">,</span> pizzaWithCheeseAndTomato<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="output-txt-执行结果"><a href="#output-txt-执行结果" class="header-anchor">#</a> <strong>output.txt:</strong> 执行结果</h4></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/25/2021, 6:21:20 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/开发基础/设计模式/结构型模式/组合模式.html" class="prev">
        组合模式
      </a></span> <span class="next"><a href="/blog/开发基础/设计模式/结构型模式/适配器模式.html">
        适配器模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.00951051.js" defer></script><script src="/blog/assets/js/3.a4fcd0ee.js" defer></script><script src="/blog/assets/js/35.124549a3.js" defer></script>
  </body>
</html>
