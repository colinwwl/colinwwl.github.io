<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>外观模式 | 一名PHP+GO工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.b3aba94c.css" as="style"><link rel="preload" href="/blog/assets/js/app.00951051.js" as="script"><link rel="preload" href="/blog/assets/js/3.a4fcd0ee.js" as="script"><link rel="preload" href="/blog/assets/js/86.7493396b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b59a7b82.js"><link rel="prefetch" href="/blog/assets/js/100.21b8c21c.js"><link rel="prefetch" href="/blog/assets/js/101.81857167.js"><link rel="prefetch" href="/blog/assets/js/102.7b3dc655.js"><link rel="prefetch" href="/blog/assets/js/103.3e4ed853.js"><link rel="prefetch" href="/blog/assets/js/104.10bc5a69.js"><link rel="prefetch" href="/blog/assets/js/105.4ab84c31.js"><link rel="prefetch" href="/blog/assets/js/106.48a2438e.js"><link rel="prefetch" href="/blog/assets/js/107.cc68b4a0.js"><link rel="prefetch" href="/blog/assets/js/108.a8d052c3.js"><link rel="prefetch" href="/blog/assets/js/109.2cc1bd1b.js"><link rel="prefetch" href="/blog/assets/js/11.1a97fa0b.js"><link rel="prefetch" href="/blog/assets/js/110.486af5be.js"><link rel="prefetch" href="/blog/assets/js/111.cd3af9b2.js"><link rel="prefetch" href="/blog/assets/js/112.e090c894.js"><link rel="prefetch" href="/blog/assets/js/113.fb95ddbe.js"><link rel="prefetch" href="/blog/assets/js/114.971377b4.js"><link rel="prefetch" href="/blog/assets/js/115.7fea5c7d.js"><link rel="prefetch" href="/blog/assets/js/116.de4c5456.js"><link rel="prefetch" href="/blog/assets/js/117.627d5d8b.js"><link rel="prefetch" href="/blog/assets/js/118.ba1cf79a.js"><link rel="prefetch" href="/blog/assets/js/119.68167d03.js"><link rel="prefetch" href="/blog/assets/js/12.303ba226.js"><link rel="prefetch" href="/blog/assets/js/120.57de0dea.js"><link rel="prefetch" href="/blog/assets/js/121.bfa03c87.js"><link rel="prefetch" href="/blog/assets/js/122.561ef8e8.js"><link rel="prefetch" href="/blog/assets/js/123.eded809d.js"><link rel="prefetch" href="/blog/assets/js/124.96a2d5d3.js"><link rel="prefetch" href="/blog/assets/js/125.f6db180c.js"><link rel="prefetch" href="/blog/assets/js/126.f0e1e1b7.js"><link rel="prefetch" href="/blog/assets/js/127.23ea403b.js"><link rel="prefetch" href="/blog/assets/js/128.0214b1f1.js"><link rel="prefetch" href="/blog/assets/js/129.02f2c2a5.js"><link rel="prefetch" href="/blog/assets/js/13.36c21e62.js"><link rel="prefetch" href="/blog/assets/js/130.a7c917b1.js"><link rel="prefetch" href="/blog/assets/js/131.9c909898.js"><link rel="prefetch" href="/blog/assets/js/132.4218bdf5.js"><link rel="prefetch" href="/blog/assets/js/133.bffbfd91.js"><link rel="prefetch" href="/blog/assets/js/134.809e389b.js"><link rel="prefetch" href="/blog/assets/js/135.c8528c36.js"><link rel="prefetch" href="/blog/assets/js/136.1d13c0e3.js"><link rel="prefetch" href="/blog/assets/js/137.b09b2b7d.js"><link rel="prefetch" href="/blog/assets/js/138.0caa5790.js"><link rel="prefetch" href="/blog/assets/js/139.844b9623.js"><link rel="prefetch" href="/blog/assets/js/14.5fcdcf70.js"><link rel="prefetch" href="/blog/assets/js/140.b9e96587.js"><link rel="prefetch" href="/blog/assets/js/141.af882bd0.js"><link rel="prefetch" href="/blog/assets/js/142.880d8a7d.js"><link rel="prefetch" href="/blog/assets/js/143.2d714249.js"><link rel="prefetch" href="/blog/assets/js/144.dc000941.js"><link rel="prefetch" href="/blog/assets/js/145.68228f4e.js"><link rel="prefetch" href="/blog/assets/js/146.83171f6d.js"><link rel="prefetch" href="/blog/assets/js/147.20c2b85e.js"><link rel="prefetch" href="/blog/assets/js/148.716b7ffb.js"><link rel="prefetch" href="/blog/assets/js/149.bbcaff87.js"><link rel="prefetch" href="/blog/assets/js/15.9f5b79d0.js"><link rel="prefetch" href="/blog/assets/js/150.2cfeb60d.js"><link rel="prefetch" href="/blog/assets/js/151.c8e8889f.js"><link rel="prefetch" href="/blog/assets/js/152.0c5c1d81.js"><link rel="prefetch" href="/blog/assets/js/153.44ee71a3.js"><link rel="prefetch" href="/blog/assets/js/154.dc02b6b3.js"><link rel="prefetch" href="/blog/assets/js/155.1dd48850.js"><link rel="prefetch" href="/blog/assets/js/156.498925cb.js"><link rel="prefetch" href="/blog/assets/js/157.f6b3989f.js"><link rel="prefetch" href="/blog/assets/js/158.cda04b40.js"><link rel="prefetch" href="/blog/assets/js/159.9a6b5649.js"><link rel="prefetch" href="/blog/assets/js/16.78e99664.js"><link rel="prefetch" href="/blog/assets/js/160.70593682.js"><link rel="prefetch" href="/blog/assets/js/161.e86669e6.js"><link rel="prefetch" href="/blog/assets/js/162.14b724fa.js"><link rel="prefetch" href="/blog/assets/js/163.5efb49e5.js"><link rel="prefetch" href="/blog/assets/js/164.7b79d6e9.js"><link rel="prefetch" href="/blog/assets/js/165.a91831fd.js"><link rel="prefetch" href="/blog/assets/js/166.9bf9d4df.js"><link rel="prefetch" href="/blog/assets/js/167.5653e295.js"><link rel="prefetch" href="/blog/assets/js/168.305d6c4c.js"><link rel="prefetch" href="/blog/assets/js/169.1e7bb107.js"><link rel="prefetch" href="/blog/assets/js/17.4a056dce.js"><link rel="prefetch" href="/blog/assets/js/170.59428d51.js"><link rel="prefetch" href="/blog/assets/js/171.3fbed663.js"><link rel="prefetch" href="/blog/assets/js/172.b01e9b0f.js"><link rel="prefetch" href="/blog/assets/js/173.550111a5.js"><link rel="prefetch" href="/blog/assets/js/174.0f6ca520.js"><link rel="prefetch" href="/blog/assets/js/175.9fc6896e.js"><link rel="prefetch" href="/blog/assets/js/176.80b407cf.js"><link rel="prefetch" href="/blog/assets/js/177.c02bc71a.js"><link rel="prefetch" href="/blog/assets/js/178.21d1d565.js"><link rel="prefetch" href="/blog/assets/js/179.f26bcc6c.js"><link rel="prefetch" href="/blog/assets/js/18.b1a53894.js"><link rel="prefetch" href="/blog/assets/js/180.a3e43146.js"><link rel="prefetch" href="/blog/assets/js/181.df6a3b04.js"><link rel="prefetch" href="/blog/assets/js/182.1bf0bb44.js"><link rel="prefetch" href="/blog/assets/js/183.2ad4dd90.js"><link rel="prefetch" href="/blog/assets/js/19.a5c2b897.js"><link rel="prefetch" href="/blog/assets/js/2.1e985050.js"><link rel="prefetch" href="/blog/assets/js/20.dba1906e.js"><link rel="prefetch" href="/blog/assets/js/21.33eb38b7.js"><link rel="prefetch" href="/blog/assets/js/22.6798bae6.js"><link rel="prefetch" href="/blog/assets/js/23.1f95b628.js"><link rel="prefetch" href="/blog/assets/js/24.742bac80.js"><link rel="prefetch" href="/blog/assets/js/25.36482f15.js"><link rel="prefetch" href="/blog/assets/js/26.bded1595.js"><link rel="prefetch" href="/blog/assets/js/27.aa5c03e9.js"><link rel="prefetch" href="/blog/assets/js/28.4c8b8404.js"><link rel="prefetch" href="/blog/assets/js/29.a49f363d.js"><link rel="prefetch" href="/blog/assets/js/30.ad1115ad.js"><link rel="prefetch" href="/blog/assets/js/31.17eb06fa.js"><link rel="prefetch" href="/blog/assets/js/32.0dd97449.js"><link rel="prefetch" href="/blog/assets/js/33.2df44903.js"><link rel="prefetch" href="/blog/assets/js/34.b4c3eaa1.js"><link rel="prefetch" href="/blog/assets/js/35.124549a3.js"><link rel="prefetch" href="/blog/assets/js/36.9a868b88.js"><link rel="prefetch" href="/blog/assets/js/37.eaebfdf4.js"><link rel="prefetch" href="/blog/assets/js/38.2acf2f60.js"><link rel="prefetch" href="/blog/assets/js/39.2799c3d4.js"><link rel="prefetch" href="/blog/assets/js/4.ede0b72f.js"><link rel="prefetch" href="/blog/assets/js/40.f1ef8e47.js"><link rel="prefetch" href="/blog/assets/js/41.5a6a598c.js"><link rel="prefetch" href="/blog/assets/js/42.6ffc0b22.js"><link rel="prefetch" href="/blog/assets/js/43.9194ea24.js"><link rel="prefetch" href="/blog/assets/js/44.c40b52bd.js"><link rel="prefetch" href="/blog/assets/js/45.d757029a.js"><link rel="prefetch" href="/blog/assets/js/46.a85207f6.js"><link rel="prefetch" href="/blog/assets/js/47.3886b655.js"><link rel="prefetch" href="/blog/assets/js/48.ddec81b9.js"><link rel="prefetch" href="/blog/assets/js/49.839e6c52.js"><link rel="prefetch" href="/blog/assets/js/5.1793e39a.js"><link rel="prefetch" href="/blog/assets/js/50.c3df41b4.js"><link rel="prefetch" href="/blog/assets/js/51.d4177a29.js"><link rel="prefetch" href="/blog/assets/js/52.bf49439d.js"><link rel="prefetch" href="/blog/assets/js/53.cb99eff8.js"><link rel="prefetch" href="/blog/assets/js/54.da2c6510.js"><link rel="prefetch" href="/blog/assets/js/55.60778aae.js"><link rel="prefetch" href="/blog/assets/js/56.e23f6578.js"><link rel="prefetch" href="/blog/assets/js/57.55c013d6.js"><link rel="prefetch" href="/blog/assets/js/58.14eaabab.js"><link rel="prefetch" href="/blog/assets/js/59.030b55b4.js"><link rel="prefetch" href="/blog/assets/js/6.d8f1e90e.js"><link rel="prefetch" href="/blog/assets/js/60.565f9438.js"><link rel="prefetch" href="/blog/assets/js/61.8119994e.js"><link rel="prefetch" href="/blog/assets/js/62.c351e7d3.js"><link rel="prefetch" href="/blog/assets/js/63.85eb95d7.js"><link rel="prefetch" href="/blog/assets/js/64.267fa0b4.js"><link rel="prefetch" href="/blog/assets/js/65.b7e1065f.js"><link rel="prefetch" href="/blog/assets/js/66.668947f0.js"><link rel="prefetch" href="/blog/assets/js/67.f204ecee.js"><link rel="prefetch" href="/blog/assets/js/68.08712dde.js"><link rel="prefetch" href="/blog/assets/js/69.956d5b92.js"><link rel="prefetch" href="/blog/assets/js/7.694ed581.js"><link rel="prefetch" href="/blog/assets/js/70.dcbf55db.js"><link rel="prefetch" href="/blog/assets/js/71.2880b991.js"><link rel="prefetch" href="/blog/assets/js/72.669b09d5.js"><link rel="prefetch" href="/blog/assets/js/73.50ae5b9c.js"><link rel="prefetch" href="/blog/assets/js/74.5bcdc0ca.js"><link rel="prefetch" href="/blog/assets/js/75.bbf303fb.js"><link rel="prefetch" href="/blog/assets/js/76.f7210762.js"><link rel="prefetch" href="/blog/assets/js/77.8774fcbb.js"><link rel="prefetch" href="/blog/assets/js/78.279c3c49.js"><link rel="prefetch" href="/blog/assets/js/79.919b8dca.js"><link rel="prefetch" href="/blog/assets/js/8.d90e6c3f.js"><link rel="prefetch" href="/blog/assets/js/80.7af53e65.js"><link rel="prefetch" href="/blog/assets/js/81.38bf524a.js"><link rel="prefetch" href="/blog/assets/js/82.9b8b2e5c.js"><link rel="prefetch" href="/blog/assets/js/83.1ae8f42d.js"><link rel="prefetch" href="/blog/assets/js/84.ffb238f7.js"><link rel="prefetch" href="/blog/assets/js/85.893a9dfb.js"><link rel="prefetch" href="/blog/assets/js/87.1acbb69b.js"><link rel="prefetch" href="/blog/assets/js/88.8aaccadd.js"><link rel="prefetch" href="/blog/assets/js/89.a603e3c7.js"><link rel="prefetch" href="/blog/assets/js/9.d9968690.js"><link rel="prefetch" href="/blog/assets/js/90.e1b21937.js"><link rel="prefetch" href="/blog/assets/js/91.694a3ac8.js"><link rel="prefetch" href="/blog/assets/js/92.b449228f.js"><link rel="prefetch" href="/blog/assets/js/93.fce73a30.js"><link rel="prefetch" href="/blog/assets/js/94.27fd5c80.js"><link rel="prefetch" href="/blog/assets/js/95.93d5425c.js"><link rel="prefetch" href="/blog/assets/js/96.736790ee.js"><link rel="prefetch" href="/blog/assets/js/97.fc4e3b0b.js"><link rel="prefetch" href="/blog/assets/js/98.da9aeea6.js"><link rel="prefetch" href="/blog/assets/js/99.69b22933.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.b3aba94c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名PHP+GO工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/创建型模式/单例模式" class="sidebar-heading clickable"><span>创建型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/创建型模式/单例模式.html" class="sidebar-link">单例模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/原型模式.html" class="sidebar-link">原型模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/工厂方法模式.html" class="sidebar-link">工厂方法模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/抽象工厂模式.html" class="sidebar-link">抽象工厂模式</a></li><li><a href="/blog/开发基础/设计模式/创建型模式/生成器模式.html" class="sidebar-link">生成器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/结构型模式/享元模式" class="sidebar-heading clickable open"><span>结构型模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/结构型模式/享元模式.html" class="sidebar-link">享元模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/代理模式.html" class="sidebar-link">代理模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html" class="active sidebar-link">外观模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html#意图" class="sidebar-link">意图</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html#解决方案" class="sidebar-link">解决方案</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html#真实世界类比" class="sidebar-link">真实世界类比</a></li><li class="sidebar-sub-header"><a href="/blog/开发基础/设计模式/结构型模式/外观模式.html#概念示例" class="sidebar-link">概念示例</a></li></ul></li><li><a href="/blog/开发基础/设计模式/结构型模式/桥接模式.html" class="sidebar-link">桥接模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/组合模式.html" class="sidebar-link">组合模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/装饰模式.html" class="sidebar-link">装饰模式</a></li><li><a href="/blog/开发基础/设计模式/结构型模式/适配器模式.html" class="sidebar-link">适配器模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/开发基础/设计模式/行为模式/中介者模式" class="sidebar-heading clickable"><span>行为模式</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/开发基础/设计模式/行为模式/中介者模式.html" class="sidebar-link">中介者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/命令模式.html" class="sidebar-link">命令模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/备忘录模式.html" class="sidebar-link">备忘录模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/模板方法模式.html" class="sidebar-link">模板方法模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/状态模式.html" class="sidebar-link">状态模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/策略模式.html" class="sidebar-link">策略模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/观察者模式.html" class="sidebar-link">观察者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/访问者模式.html" class="sidebar-link">访问者模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/责任链模式.html" class="sidebar-link">责任链模式</a></li><li><a href="/blog/开发基础/设计模式/行为模式/迭代器模式.html" class="sidebar-link">迭代器模式</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="外观模式"><a href="#外观模式" class="header-anchor">#</a> 外观模式</h1> <h2 id="意图"><a href="#意图" class="header-anchor">#</a> 意图</h2> <p><strong>外观模式</strong>是一种结构型设计模式， 能为程序库、 框架或其他复杂类提供一个简单的接口。</p> <p><img src="/blog/assets/img/facade.1f473327.png" alt="外观设计模式"></p> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <p>假设你必须在代码中使用某个复杂的库或框架中的众多对象。 正常情况下， 你需要负责所有对象的初始化工作、 管理其依赖关系并按正确的顺序执行方法等。</p> <p>最终， 程序中类的业务逻辑将与第三方类的实现细节紧密耦合， 使得理解和维护代码的工作很难进行。</p> <h2 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h2> <p>外观类为包含许多活动部件的复杂子系统提供一个简单的接口。 与直接调用子系统相比， 外观提供的功能可能比较有限， 但它却包含了客户端真正关心的功能。</p> <p>如果你的程序需要与包含几十种功能的复杂库整合， 但只需使用其中非常少的功能， 那么使用外观模式会非常方便，</p> <p>例如， 上传猫咪搞笑短视频到社交媒体网站的应用可能会用到专业的视频转换库， 但它只需使用一个包含 <code>encode­(filename, format)</code>方法 （以文件名与文件格式为参数进行编码的方法） 的类即可。 在创建这个类并将其连接到视频转换库后， 你就拥有了自己的第一个外观。</p> <h2 id="真实世界类比"><a href="#真实世界类比" class="header-anchor">#</a> 真实世界类比</h2> <p><img src="/blog/assets/img/live-example-zh.e8371b6a.png" alt="电话购物的示例"></p> <p>电话购物。</p> <p>当你通过电话给商店下达订单时， 接线员就是该商店的所有服务和部门的外观。 接线员为你提供了一个同购物系统、 支付网关和各种送货服务进行互动的简单语音接口。</p> <h1 id="go-外观模式讲解和代码示例"><a href="#go-外观模式讲解和代码示例" class="header-anchor">#</a> Go <strong>外观</strong>模式讲解和代码示例</h1> <p><strong>外观</strong>是一种结构型设计模式， 能为复杂系统、 程序库或框架提供一个简单 （但有限） 的接口。</p> <p>尽管外观模式降低了程序的整体复杂度， 但它同时也有助于将不需要的依赖移动到同一个位置。</p> <h2 id="概念示例"><a href="#概念示例" class="header-anchor">#</a> 概念示例</h2> <p>人们很容易低估使用信用卡订购披萨时幕后工作的复杂程度。 在整个过程中会有不少的子系统发挥作用。 下面是其中的一部分：</p> <ul><li>检查账户</li> <li>检查安全码</li> <li>借记/贷记余额</li> <li>账簿录入</li> <li>发送消息通知</li></ul> <p>在如此复杂的系统中， 可以说是一步错步步错， 很容易就会引发大的问题。 这就是为什么我们需要外观模式， 让客户端可以使用一个简单的接口来处理众多组件。 客户端只需要输入卡片详情、 安全码、 支付金额以及操作类型即可。 外观模式会与多种组件进一步地进行沟通， 而又不会向客户端暴露其内部的复杂性。</p> <h4 id="walletfacade-go-外观"><a href="#walletfacade-go-外观" class="header-anchor">#</a> <strong>walletFacade.go:</strong> 外观</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> walletFacade <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    account      <span class="token operator">*</span>account
    wallet       <span class="token operator">*</span>wallet
    securityCode <span class="token operator">*</span>securityCode
    notification <span class="token operator">*</span>notification
    ledger       <span class="token operator">*</span>ledger
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newWalletFacade</span><span class="token punctuation">(</span>accountID <span class="token builtin">string</span><span class="token punctuation">,</span> code <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>walletFacade <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Starting create account&quot;</span><span class="token punctuation">)</span>
    walletFacacde <span class="token operator">:=</span> <span class="token operator">&amp;</span>walletFacade<span class="token punctuation">{</span>
        account<span class="token punctuation">:</span>      <span class="token function">newAccount</span><span class="token punctuation">(</span>accountID<span class="token punctuation">)</span><span class="token punctuation">,</span>
        securityCode<span class="token punctuation">:</span> <span class="token function">newSecurityCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span>
        wallet<span class="token punctuation">:</span>       <span class="token function">newWallet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        notification<span class="token punctuation">:</span> <span class="token operator">&amp;</span>notification<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        ledger<span class="token punctuation">:</span>       <span class="token operator">&amp;</span>ledger<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Account created&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> walletFacacde
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>walletFacade<span class="token punctuation">)</span> <span class="token function">addMoneyToWallet</span><span class="token punctuation">(</span>accountID <span class="token builtin">string</span><span class="token punctuation">,</span> securityCode <span class="token builtin">int</span><span class="token punctuation">,</span> amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Starting add money to wallet&quot;</span><span class="token punctuation">)</span>
    err <span class="token operator">:=</span> w<span class="token punctuation">.</span>account<span class="token punctuation">.</span><span class="token function">checkAccount</span><span class="token punctuation">(</span>accountID<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>
    err <span class="token operator">=</span> w<span class="token punctuation">.</span>securityCode<span class="token punctuation">.</span><span class="token function">checkCode</span><span class="token punctuation">(</span>securityCode<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>
    w<span class="token punctuation">.</span>wallet<span class="token punctuation">.</span><span class="token function">creditBalance</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">sendWalletCreditNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>ledger<span class="token punctuation">.</span><span class="token function">makeEntry</span><span class="token punctuation">(</span>accountID<span class="token punctuation">,</span> <span class="token string">&quot;credit&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>walletFacade<span class="token punctuation">)</span> <span class="token function">deductMoneyFromWallet</span><span class="token punctuation">(</span>accountID <span class="token builtin">string</span><span class="token punctuation">,</span> securityCode <span class="token builtin">int</span><span class="token punctuation">,</span> amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Starting debit money from wallet&quot;</span><span class="token punctuation">)</span>
    err <span class="token operator">:=</span> w<span class="token punctuation">.</span>account<span class="token punctuation">.</span><span class="token function">checkAccount</span><span class="token punctuation">(</span>accountID<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>

    err <span class="token operator">=</span> w<span class="token punctuation">.</span>securityCode<span class="token punctuation">.</span><span class="token function">checkCode</span><span class="token punctuation">(</span>securityCode<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>
    err <span class="token operator">=</span> w<span class="token punctuation">.</span>wallet<span class="token punctuation">.</span><span class="token function">debitBalance</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> err
    <span class="token punctuation">}</span>
    w<span class="token punctuation">.</span>notification<span class="token punctuation">.</span><span class="token function">sendWalletDebitNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>ledger<span class="token punctuation">.</span><span class="token function">makeEntry</span><span class="token punctuation">(</span>accountID<span class="token punctuation">,</span> <span class="token string">&quot;credit&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="account-go-复杂子系统的组成部分"><a href="#account-go-复杂子系统的组成部分" class="header-anchor">#</a> <strong>account.go:</strong> 复杂子系统的组成部分</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> account <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newAccount</span><span class="token punctuation">(</span>accountName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>account <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>account<span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> accountName<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>account<span class="token punctuation">)</span> <span class="token function">checkAccount</span><span class="token punctuation">(</span>accountName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> a<span class="token punctuation">.</span>name <span class="token operator">!=</span> accountName <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;Account Name is incorrect&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Account Verified&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="securitycode-go-复杂子系统的组成部分"><a href="#securitycode-go-复杂子系统的组成部分" class="header-anchor">#</a> <strong>securityCode.go:</strong> 复杂子系统的组成部分</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> securityCode <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    code <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newSecurityCode</span><span class="token punctuation">(</span>code <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>securityCode <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>securityCode<span class="token punctuation">{</span>
        code<span class="token punctuation">:</span> code<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>securityCode<span class="token punctuation">)</span> <span class="token function">checkCode</span><span class="token punctuation">(</span>incomingCode <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> s<span class="token punctuation">.</span>code <span class="token operator">!=</span> incomingCode <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;Security Code is incorrect&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;SecurityCode Verified&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="wallet-go-复杂子系统的组成部分"><a href="#wallet-go-复杂子系统的组成部分" class="header-anchor">#</a> <strong>wallet.go:</strong> 复杂子系统的组成部分</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> wallet <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    balance <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newWallet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>wallet <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>wallet<span class="token punctuation">{</span>
        balance<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>wallet<span class="token punctuation">)</span> <span class="token function">creditBalance</span><span class="token punctuation">(</span>amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    w<span class="token punctuation">.</span>balance <span class="token operator">+=</span> amount
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Wallet balance added successfully&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>w <span class="token operator">*</span>wallet<span class="token punctuation">)</span> <span class="token function">debitBalance</span><span class="token punctuation">(</span>amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> w<span class="token punctuation">.</span>balance <span class="token operator">&lt;</span> amount <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;Balance is not sufficient&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Wallet balance is Sufficient&quot;</span><span class="token punctuation">)</span>
    w<span class="token punctuation">.</span>balance <span class="token operator">=</span> w<span class="token punctuation">.</span>balance <span class="token operator">-</span> amount
    <span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ledger-go-复杂子系统的组成部分"><a href="#ledger-go-复杂子系统的组成部分" class="header-anchor">#</a> <strong>ledger.go:</strong> 复杂子系统的组成部分</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> ledger <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>ledger<span class="token punctuation">)</span> <span class="token function">makeEntry</span><span class="token punctuation">(</span>accountID<span class="token punctuation">,</span> txnType <span class="token builtin">string</span><span class="token punctuation">,</span> amount <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Make ledger entry for accountId %s with txnType %s for amount %d\n&quot;</span><span class="token punctuation">,</span> accountID<span class="token punctuation">,</span> txnType<span class="token punctuation">,</span> amount<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="notification-go-复杂子系统的组成部分"><a href="#notification-go-复杂子系统的组成部分" class="header-anchor">#</a> <strong>notification.go:</strong> 复杂子系统的组成部分</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> notification <span class="token keyword">struct</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>n <span class="token operator">*</span>notification<span class="token punctuation">)</span> <span class="token function">sendWalletCreditNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sending wallet credit notification&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>n <span class="token operator">*</span>notification<span class="token punctuation">)</span> <span class="token function">sendWalletDebitNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Sending wallet debit notification&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="main-go-客户端代码"><a href="#main-go-客户端代码" class="header-anchor">#</a> <strong>main.go:</strong> 客户端代码</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;log&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    walletFacade <span class="token operator">:=</span> <span class="token function">newWalletFacade</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    err <span class="token operator">:=</span> walletFacade<span class="token punctuation">.</span><span class="token function">addMoneyToWallet</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    err <span class="token operator">=</span> walletFacade<span class="token punctuation">.</span><span class="token function">deductMoneyFromWallet</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">&quot;Error: %s\n&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="output-txt-执行结果"><a href="#output-txt-执行结果" class="header-anchor">#</a> <strong>output.txt:</strong> 执行结果</h4> <div class="language- extra-class"><pre class="language-text"><code>Starting create account
Account created

Starting add money to wallet
Account Verified
SecurityCode Verified
Wallet balance added successfully
Sending wallet credit notification
Make ledger entry for accountId abc with txnType credit for amount 10

Starting debit money from wallet
Account Verified
SecurityCode Verified
Wallet balance is Sufficient
Sending wallet debit notification
Make ledger entry for accountId abc with txnType debit for amount 5
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/25/2021, 6:21:20 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/开发基础/设计模式/结构型模式/代理模式.html" class="prev">
        代理模式
      </a></span> <span class="next"><a href="/blog/开发基础/设计模式/结构型模式/桥接模式.html">
        桥接模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.00951051.js" defer></script><script src="/blog/assets/js/3.a4fcd0ee.js" defer></script><script src="/blog/assets/js/86.7493396b.js" defer></script>
  </body>
</html>
