<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>扩展 | 一名GO+PHP工程师</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e16ad0a6.css" as="style"><link rel="preload" href="/blog/assets/js/app.4d60979a.js" as="script"><link rel="preload" href="/blog/assets/js/3.64b046d0.js" as="script"><link rel="preload" href="/blog/assets/js/170.7af88887.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.9e6787ec.js"><link rel="prefetch" href="/blog/assets/js/100.056ffb3b.js"><link rel="prefetch" href="/blog/assets/js/101.621565b8.js"><link rel="prefetch" href="/blog/assets/js/102.e7ddf77c.js"><link rel="prefetch" href="/blog/assets/js/103.0ede41cb.js"><link rel="prefetch" href="/blog/assets/js/104.7911c85c.js"><link rel="prefetch" href="/blog/assets/js/105.bd8846c4.js"><link rel="prefetch" href="/blog/assets/js/106.f8e8e430.js"><link rel="prefetch" href="/blog/assets/js/107.8c51e30a.js"><link rel="prefetch" href="/blog/assets/js/108.442ee20a.js"><link rel="prefetch" href="/blog/assets/js/109.b145eda9.js"><link rel="prefetch" href="/blog/assets/js/11.8c425353.js"><link rel="prefetch" href="/blog/assets/js/110.10aafd35.js"><link rel="prefetch" href="/blog/assets/js/111.3cf1f8f1.js"><link rel="prefetch" href="/blog/assets/js/112.5798b1a1.js"><link rel="prefetch" href="/blog/assets/js/113.a97ed996.js"><link rel="prefetch" href="/blog/assets/js/114.cb641292.js"><link rel="prefetch" href="/blog/assets/js/115.e46888d2.js"><link rel="prefetch" href="/blog/assets/js/116.878e5be8.js"><link rel="prefetch" href="/blog/assets/js/117.21198ead.js"><link rel="prefetch" href="/blog/assets/js/118.f1a06403.js"><link rel="prefetch" href="/blog/assets/js/119.62c4cafa.js"><link rel="prefetch" href="/blog/assets/js/12.c80ac351.js"><link rel="prefetch" href="/blog/assets/js/120.3a2ddb87.js"><link rel="prefetch" href="/blog/assets/js/121.56a24085.js"><link rel="prefetch" href="/blog/assets/js/122.1585235d.js"><link rel="prefetch" href="/blog/assets/js/123.f501fffc.js"><link rel="prefetch" href="/blog/assets/js/124.7403ec7e.js"><link rel="prefetch" href="/blog/assets/js/125.770ca9d6.js"><link rel="prefetch" href="/blog/assets/js/126.d8607284.js"><link rel="prefetch" href="/blog/assets/js/127.e7d63512.js"><link rel="prefetch" href="/blog/assets/js/128.de8011f3.js"><link rel="prefetch" href="/blog/assets/js/129.f4075b49.js"><link rel="prefetch" href="/blog/assets/js/13.3b04e98b.js"><link rel="prefetch" href="/blog/assets/js/130.18b6488c.js"><link rel="prefetch" href="/blog/assets/js/131.dc659172.js"><link rel="prefetch" href="/blog/assets/js/132.bbd56ade.js"><link rel="prefetch" href="/blog/assets/js/133.25f1a7e7.js"><link rel="prefetch" href="/blog/assets/js/134.beb459f9.js"><link rel="prefetch" href="/blog/assets/js/135.e1df2f28.js"><link rel="prefetch" href="/blog/assets/js/136.9e705411.js"><link rel="prefetch" href="/blog/assets/js/137.745f3187.js"><link rel="prefetch" href="/blog/assets/js/138.a894c051.js"><link rel="prefetch" href="/blog/assets/js/139.4fea8c7c.js"><link rel="prefetch" href="/blog/assets/js/14.a96b8c6c.js"><link rel="prefetch" href="/blog/assets/js/140.da5db673.js"><link rel="prefetch" href="/blog/assets/js/141.ce1ae60f.js"><link rel="prefetch" href="/blog/assets/js/142.7b3a73dc.js"><link rel="prefetch" href="/blog/assets/js/143.6ac22864.js"><link rel="prefetch" href="/blog/assets/js/144.3f487824.js"><link rel="prefetch" href="/blog/assets/js/145.97671b84.js"><link rel="prefetch" href="/blog/assets/js/146.3759cf9f.js"><link rel="prefetch" href="/blog/assets/js/147.41e0eac3.js"><link rel="prefetch" href="/blog/assets/js/148.a02ac609.js"><link rel="prefetch" href="/blog/assets/js/149.89f3b78d.js"><link rel="prefetch" href="/blog/assets/js/15.f08be4b3.js"><link rel="prefetch" href="/blog/assets/js/150.286e207e.js"><link rel="prefetch" href="/blog/assets/js/151.4fd49e2d.js"><link rel="prefetch" href="/blog/assets/js/152.f6b01ae5.js"><link rel="prefetch" href="/blog/assets/js/153.5f760eb0.js"><link rel="prefetch" href="/blog/assets/js/154.f8478264.js"><link rel="prefetch" href="/blog/assets/js/155.7c03923e.js"><link rel="prefetch" href="/blog/assets/js/156.649172ef.js"><link rel="prefetch" href="/blog/assets/js/157.db021179.js"><link rel="prefetch" href="/blog/assets/js/158.743531b1.js"><link rel="prefetch" href="/blog/assets/js/159.317d12fa.js"><link rel="prefetch" href="/blog/assets/js/16.89eaed28.js"><link rel="prefetch" href="/blog/assets/js/160.12019f22.js"><link rel="prefetch" href="/blog/assets/js/161.fcfee7ab.js"><link rel="prefetch" href="/blog/assets/js/162.c9658dcc.js"><link rel="prefetch" href="/blog/assets/js/163.3dae169a.js"><link rel="prefetch" href="/blog/assets/js/164.505c55e3.js"><link rel="prefetch" href="/blog/assets/js/165.63a7b070.js"><link rel="prefetch" href="/blog/assets/js/166.e3548c5c.js"><link rel="prefetch" href="/blog/assets/js/167.eb3e0529.js"><link rel="prefetch" href="/blog/assets/js/168.195c2899.js"><link rel="prefetch" href="/blog/assets/js/169.01d6ef72.js"><link rel="prefetch" href="/blog/assets/js/17.b2ecb0d6.js"><link rel="prefetch" href="/blog/assets/js/171.594e54cd.js"><link rel="prefetch" href="/blog/assets/js/172.30595b1c.js"><link rel="prefetch" href="/blog/assets/js/173.37c33aff.js"><link rel="prefetch" href="/blog/assets/js/174.f8ee4785.js"><link rel="prefetch" href="/blog/assets/js/175.4858b4b8.js"><link rel="prefetch" href="/blog/assets/js/176.0254a415.js"><link rel="prefetch" href="/blog/assets/js/177.5bebb88a.js"><link rel="prefetch" href="/blog/assets/js/178.1c924293.js"><link rel="prefetch" href="/blog/assets/js/179.7bd03a01.js"><link rel="prefetch" href="/blog/assets/js/18.3f2efd75.js"><link rel="prefetch" href="/blog/assets/js/180.6be40a39.js"><link rel="prefetch" href="/blog/assets/js/181.c1f6eaa5.js"><link rel="prefetch" href="/blog/assets/js/182.565dfa75.js"><link rel="prefetch" href="/blog/assets/js/183.587bc5a9.js"><link rel="prefetch" href="/blog/assets/js/184.0ad4a9d3.js"><link rel="prefetch" href="/blog/assets/js/19.2265afd3.js"><link rel="prefetch" href="/blog/assets/js/2.344d48c9.js"><link rel="prefetch" href="/blog/assets/js/20.b0737623.js"><link rel="prefetch" href="/blog/assets/js/21.f99e8b44.js"><link rel="prefetch" href="/blog/assets/js/22.ada982b0.js"><link rel="prefetch" href="/blog/assets/js/23.7a2e8419.js"><link rel="prefetch" href="/blog/assets/js/24.ecb72dfd.js"><link rel="prefetch" href="/blog/assets/js/25.9fcdfa9e.js"><link rel="prefetch" href="/blog/assets/js/26.4089a9a5.js"><link rel="prefetch" href="/blog/assets/js/27.2b503aa6.js"><link rel="prefetch" href="/blog/assets/js/28.25a596a9.js"><link rel="prefetch" href="/blog/assets/js/29.0bae5dc3.js"><link rel="prefetch" href="/blog/assets/js/30.bf188ae3.js"><link rel="prefetch" href="/blog/assets/js/31.64cdc230.js"><link rel="prefetch" href="/blog/assets/js/32.666cd74a.js"><link rel="prefetch" href="/blog/assets/js/33.c9f02fd4.js"><link rel="prefetch" href="/blog/assets/js/34.0787da98.js"><link rel="prefetch" href="/blog/assets/js/35.69be40e1.js"><link rel="prefetch" href="/blog/assets/js/36.967e65fc.js"><link rel="prefetch" href="/blog/assets/js/37.c4eed72d.js"><link rel="prefetch" href="/blog/assets/js/38.b5a162e9.js"><link rel="prefetch" href="/blog/assets/js/39.d012b075.js"><link rel="prefetch" href="/blog/assets/js/4.d36f8686.js"><link rel="prefetch" href="/blog/assets/js/40.aff2fd07.js"><link rel="prefetch" href="/blog/assets/js/41.467398e0.js"><link rel="prefetch" href="/blog/assets/js/42.edd4b50d.js"><link rel="prefetch" href="/blog/assets/js/43.d3b62f61.js"><link rel="prefetch" href="/blog/assets/js/44.78a53322.js"><link rel="prefetch" href="/blog/assets/js/45.e42c778b.js"><link rel="prefetch" href="/blog/assets/js/46.6e7f12a8.js"><link rel="prefetch" href="/blog/assets/js/47.8051b696.js"><link rel="prefetch" href="/blog/assets/js/48.5e59306f.js"><link rel="prefetch" href="/blog/assets/js/49.aa379e48.js"><link rel="prefetch" href="/blog/assets/js/5.b632bd43.js"><link rel="prefetch" href="/blog/assets/js/50.10849ea7.js"><link rel="prefetch" href="/blog/assets/js/51.29fb5c68.js"><link rel="prefetch" href="/blog/assets/js/52.c183fd4d.js"><link rel="prefetch" href="/blog/assets/js/53.dba94649.js"><link rel="prefetch" href="/blog/assets/js/54.4a5a213f.js"><link rel="prefetch" href="/blog/assets/js/55.cc704ccd.js"><link rel="prefetch" href="/blog/assets/js/56.3fe2e810.js"><link rel="prefetch" href="/blog/assets/js/57.d896ecfa.js"><link rel="prefetch" href="/blog/assets/js/58.9688b6f5.js"><link rel="prefetch" href="/blog/assets/js/59.5197c3c3.js"><link rel="prefetch" href="/blog/assets/js/6.8a66f577.js"><link rel="prefetch" href="/blog/assets/js/60.d90c84e2.js"><link rel="prefetch" href="/blog/assets/js/61.585c2c2c.js"><link rel="prefetch" href="/blog/assets/js/62.407dc6a9.js"><link rel="prefetch" href="/blog/assets/js/63.f123b031.js"><link rel="prefetch" href="/blog/assets/js/64.76ecb921.js"><link rel="prefetch" href="/blog/assets/js/65.df76bad4.js"><link rel="prefetch" href="/blog/assets/js/66.5bdf7b82.js"><link rel="prefetch" href="/blog/assets/js/67.848527fb.js"><link rel="prefetch" href="/blog/assets/js/68.7d6ee143.js"><link rel="prefetch" href="/blog/assets/js/69.b1b1948f.js"><link rel="prefetch" href="/blog/assets/js/7.1faf412a.js"><link rel="prefetch" href="/blog/assets/js/70.281f82e9.js"><link rel="prefetch" href="/blog/assets/js/71.c2421361.js"><link rel="prefetch" href="/blog/assets/js/72.49706859.js"><link rel="prefetch" href="/blog/assets/js/73.0bae8805.js"><link rel="prefetch" href="/blog/assets/js/74.4a54f7b3.js"><link rel="prefetch" href="/blog/assets/js/75.b78e13e6.js"><link rel="prefetch" href="/blog/assets/js/76.f75cbb65.js"><link rel="prefetch" href="/blog/assets/js/77.9f39bc39.js"><link rel="prefetch" href="/blog/assets/js/78.2f3e606b.js"><link rel="prefetch" href="/blog/assets/js/79.34c3df65.js"><link rel="prefetch" href="/blog/assets/js/8.9e15b5fd.js"><link rel="prefetch" href="/blog/assets/js/80.6dd42b30.js"><link rel="prefetch" href="/blog/assets/js/81.b1de0e50.js"><link rel="prefetch" href="/blog/assets/js/82.72a043ee.js"><link rel="prefetch" href="/blog/assets/js/83.218b78b0.js"><link rel="prefetch" href="/blog/assets/js/84.89adc897.js"><link rel="prefetch" href="/blog/assets/js/85.c5bc3a64.js"><link rel="prefetch" href="/blog/assets/js/86.52e2e4c8.js"><link rel="prefetch" href="/blog/assets/js/87.fcd18628.js"><link rel="prefetch" href="/blog/assets/js/88.4b136e7f.js"><link rel="prefetch" href="/blog/assets/js/89.77f04e86.js"><link rel="prefetch" href="/blog/assets/js/9.3c88ce8e.js"><link rel="prefetch" href="/blog/assets/js/90.2e4e24f9.js"><link rel="prefetch" href="/blog/assets/js/91.a474434d.js"><link rel="prefetch" href="/blog/assets/js/92.781278fb.js"><link rel="prefetch" href="/blog/assets/js/93.37936542.js"><link rel="prefetch" href="/blog/assets/js/94.a6a7c7eb.js"><link rel="prefetch" href="/blog/assets/js/95.a137b98d.js"><link rel="prefetch" href="/blog/assets/js/96.19973436.js"><link rel="prefetch" href="/blog/assets/js/97.0a52a8f1.js"><link rel="prefetch" href="/blog/assets/js/98.6f4fc675.js"><link rel="prefetch" href="/blog/assets/js/99.644ed71b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e16ad0a6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">一名GO+PHP工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://gitee.com/ColinWWL/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/blog/消息队列/Kafka/1概述" class="sidebar-heading clickable open"><span>Kafka</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/消息队列/Kafka/1概述.html" class="sidebar-link">概述</a></li><li><a href="/blog/消息队列/Kafka/2集群部署.html" class="sidebar-link">集群部署</a></li><li><a href="/blog/消息队列/Kafka/3工作流程分析.html" class="sidebar-link">工作流程分析</a></li><li><a href="/blog/消息队列/Kafka/5producer拦截器-interceptor.html" class="sidebar-link">producer拦截器(interceptor)</a></li><li><a href="/blog/消息队列/Kafka/6Streams.html" class="sidebar-link">Streams</a></li><li><a href="/blog/消息队列/Kafka/7扩展.html" class="active sidebar-link">扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/消息队列/Kafka/7扩展.html#kafka配置信息" class="sidebar-link">Kafka配置信息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/消息队列/Kafka/7扩展.html#broker配置信息" class="sidebar-link">Broker配置信息</a></li><li class="sidebar-sub-header"><a href="/blog/消息队列/Kafka/7扩展.html#producer配置信息" class="sidebar-link">Producer配置信息</a></li><li class="sidebar-sub-header"><a href="/blog/消息队列/Kafka/7扩展.html#consumer-配置信息" class="sidebar-link">Consumer 配置信息</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="扩展"><a href="#扩展" class="header-anchor">#</a> 扩展</h1> <h2 id="kafka配置信息"><a href="#kafka配置信息" class="header-anchor">#</a> Kafka配置信息</h2> <h3 id="broker配置信息"><a href="#broker配置信息" class="header-anchor">#</a> Broker配置信息</h3> <table><thead><tr><th><em><strong>*属性*</strong></em></th> <th><em><strong>*默认值*</strong></em></th> <th><em><strong>*描述*</strong></em></th></tr></thead> <tbody><tr><td>broker.id</td> <td></td> <td>必填参数，broker的唯一标识</td></tr> <tr><td>log.dirs</td> <td>/tmp/kafka-logs</td> <td>Kafka数据存放的目录。可以指定多个目录，中间用逗号分隔，当新partition被创建的时会被存放到当前存放partition最少的目录。</td></tr> <tr><td>port</td> <td>9092</td> <td>BrokerServer接受客户端连接的端口号</td></tr> <tr><td>zookeeper.connect</td> <td>null</td> <td>Zookeeper的连接串，格式为：hostname1:port1,hostname2:port2,hostname3:port3。可以填一个或多个，为了提高可靠性，建议都填上。注意，此配置允许我们指定一个zookeeper路径来存放此kafka集群的所有数据，为了与其他应用集群区分开，建议在此配置中指定本集群存放目录，格式为：hostname1:port1,hostname2:port2,hostname3:port3/chroot/path 。需要注意的是，消费者的参数要和此参数一致。</td></tr> <tr><td>message.max.bytes</td> <td>1000000</td> <td>服务器可以接收到的最大的消息大小。注意此参数要和consumer的maximum.message.size大小一致，否则会因为生产者生产的消息太大导致消费者无法消费。</td></tr> <tr><td>num.io.threads</td> <td>8</td> <td>服务器用来执行读写请求的IO线程数，此参数的数量至少要等于服务器上磁盘的数量。</td></tr> <tr><td>queued.max.requests</td> <td>500</td> <td>I/O线程可以处理请求的队列大小，若实际请求数超过此大小，网络线程将停止接收新的请求。</td></tr> <tr><td>socket.send.buffer.bytes</td> <td>100 * 1024</td> <td>The SO_SNDBUFF buffer the server prefers for socket connections.</td></tr> <tr><td>socket.receive.buffer.bytes</td> <td>100 * 1024</td> <td>The SO_RCVBUFF buffer the server prefers for socket connections.</td></tr> <tr><td>socket.request.max.bytes</td> <td>100 * 1024 * 1024</td> <td>服务器允许请求的最大值， 用来防止内存溢出，其值应该小于 Java heap size.</td></tr> <tr><td>num.partitions</td> <td>1</td> <td>默认partition数量，如果topic在创建时没有指定partition数量，默认使用此值，建议改为5</td></tr> <tr><td>log.segment.bytes</td> <td>1024 * 1024 * 1024</td> <td>Segment文件的大小，超过此值将会自动新建一个segment，此值可以被topic级别的参数覆盖。</td></tr> <tr><td>log.roll.{ms,hours}</td> <td>24 * 7 hours</td> <td>新建segment文件的时间，此值可以被topic级别的参数覆盖。</td></tr> <tr><td>log.retention.{ms,minutes,hours}</td> <td>7 days</td> <td>Kafka segment log的保存周期，保存周期超过此时间日志就会被删除。此参数可以被topic级别参数覆盖。数据量大时，建议减小此值。</td></tr> <tr><td>log.retention.bytes</td> <td>-1</td> <td>每个partition的最大容量，若数据量超过此值，partition数据将会被删除。注意这个参数控制的是每个partition而不是topic。此参数可以被log级别参数覆盖。</td></tr> <tr><td>log.retention.check.interval.ms</td> <td>5 minutes</td> <td>删除策略的检查周期</td></tr> <tr><td>auto.create.topics.enable</td> <td>true</td> <td>自动创建topic参数，建议此值设置为false，严格控制topic管理，防止生产者错写topic。</td></tr> <tr><td>default.replication.factor</td> <td>1</td> <td>默认副本数量，建议改为2。</td></tr> <tr><td>replica.lag.time.max.ms</td> <td>10000</td> <td>在此窗口时间内没有收到follower的fetch请求，leader会将其从ISR(in-sync replicas)中移除。</td></tr> <tr><td>replica.lag.max.messages</td> <td>4000</td> <td>如果replica节点落后leader节点此值大小的消息数量，leader节点就会将其从ISR中移除。</td></tr> <tr><td>replica.socket.timeout.ms</td> <td>30 * 1000</td> <td>replica向leader发送请求的超时时间。</td></tr> <tr><td>replica.socket.receive.buffer.bytes</td> <td>64 * 1024</td> <td>The socket receive buffer for network requests to the leader for replicating data.</td></tr> <tr><td>replica.fetch.max.bytes</td> <td>1024 * 1024</td> <td>The number of byes of messages to attempt to fetch for each partition in the fetch requests the replicas send to the leader.</td></tr> <tr><td>replica.fetch.wait.max.ms</td> <td>500</td> <td>The maximum amount of time to wait time for data to arrive on the leader in the fetch requests sent by the replicas to the leader.</td></tr> <tr><td>num.replica.fetchers</td> <td>1</td> <td>Number of threads used to replicate messages from leaders. Increasing this value can increase the degree of I/O parallelism in the follower broker.</td></tr> <tr><td>fetch.purgatory.purge.interval.requests</td> <td>1000</td> <td>The purge interval (in number of requests) of the fetch request purgatory.</td></tr> <tr><td>zookeeper.session.timeout.ms</td> <td>6000</td> <td>ZooKeeper session 超时时间。如果在此时间内server没有向zookeeper发送心跳，zookeeper就会认为此节点已挂掉。 此值太低导致节点容易被标记死亡；若太高，.会导致太迟发现节点死亡。</td></tr> <tr><td>zookeeper.connection.timeout.ms</td> <td>6000</td> <td>客户端连接zookeeper的超时时间。</td></tr> <tr><td>zookeeper.sync.time.ms</td> <td>2000</td> <td>H ZK follower落后 ZK leader的时间。</td></tr> <tr><td>controlled.shutdown.enable</td> <td>true</td> <td>允许broker shutdown。如果启用，broker在关闭自己之前会把它上面的所有leaders转移到其它brokers上，建议启用，增加集群稳定性。</td></tr> <tr><td>auto.leader.rebalance.enable</td> <td>true</td> <td>If this is enabled the controller will automatically try to balance leadership for partitions among the brokers by periodically returning leadership to the “preferred” replica for each partition if it is available.</td></tr> <tr><td>leader.imbalance.per.broker.percentage</td> <td>10</td> <td>The percentage of leader imbalance allowed per broker. The controller will rebalance leadership if this ratio goes above the configured value per broker.</td></tr> <tr><td>leader.imbalance.check.interval.seconds</td> <td>300</td> <td>The frequency with which to check for leader imbalance.</td></tr> <tr><td>offset.metadata.max.bytes</td> <td>4096</td> <td>The maximum amount of metadata to allow clients to save with their offsets.</td></tr> <tr><td>connections.max.idle.ms</td> <td>600000</td> <td>Idle connections timeout: the server socket processor threads close the connections that idle more than this.</td></tr> <tr><td>num.recovery.threads.per.data.dir</td> <td>1</td> <td>The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.</td></tr> <tr><td>unclean.leader.election.enable</td> <td>true</td> <td>Indicates whether to enable replicas not in the ISR set to be elected as leader as a last resort, even though doing so may result in data loss.</td></tr> <tr><td>delete.topic.enable</td> <td>false</td> <td>启用deletetopic参数，建议设置为true。</td></tr> <tr><td>offsets.topic.num.partitions</td> <td>50</td> <td>The number of partitions for the offset commit topic. Since changing this after deployment is currently unsupported, we recommend using a higher setting for production (e.g., 100-200).</td></tr> <tr><td>offsets.topic.retention.minutes</td> <td>1440</td> <td>Offsets that are older than this age will be marked for deletion. The actual purge will occur when the log cleaner compacts the offsets topic.</td></tr> <tr><td>offsets.retention.check.interval.ms</td> <td>600000</td> <td>The frequency at which the offset manager checks for stale offsets.</td></tr> <tr><td>offsets.topic.replication.factor</td> <td>3</td> <td>The replication factor for the offset commit topic. A higher setting (e.g., three or four) is recommended in order to ensure higher availability. If the offsets topic is created when fewer brokers than the replication factor then the offsets topic will be created with fewer replicas.</td></tr> <tr><td>offsets.topic.segment.bytes</td> <td>104857600</td> <td>Segment size for the offsets topic. Since it uses a compacted topic, this should be kept relatively low in order to facilitate faster log compaction and loads.</td></tr> <tr><td>offsets.load.buffer.size</td> <td>5242880</td> <td>An offset load occurs when a broker becomes the offset manager for a set of consumer groups (i.e., when it becomes a leader for an offsets topic partition). This setting corresponds to the batch size (in bytes) to use when reading from the offsets segments when loading offsets into the offset manager’s cache.</td></tr> <tr><td>offsets.commit.required.acks</td> <td>-1</td> <td>The number of acknowledgements that are required before the offset commit can be accepted. This is similar to the producer’s acknowledgement setting. In general, the default should not be overridden.</td></tr> <tr><td>offsets.commit.timeout.ms</td> <td>5000</td> <td>The offset commit will be delayed until this timeout or the required number of replicas have received the offset commit. This is similar to the producer request timeout.</td></tr></tbody></table> <h3 id="producer配置信息"><a href="#producer配置信息" class="header-anchor">#</a> Producer配置信息</h3> <table><thead><tr><th><em><strong>*属性*</strong></em></th> <th><em><strong>*默认值*</strong></em></th> <th><em><strong>*描述*</strong></em></th></tr></thead> <tbody><tr><td>metadata.broker.list</td> <td></td> <td>启动时producer查询brokers的列表，可以是集群中所有brokers的一个子集。注意，这个参数只是用来获取topic的元信息用，producer会从元信息中挑选合适的broker并与之建立socket连接。格式是：host1:port1,host2:port2。</td></tr> <tr><td>request.required.acks</td> <td>0</td> <td>参见3.2节介绍</td></tr> <tr><td>request.timeout.ms</td> <td>10000</td> <td>Broker等待ack的超时时间，若等待时间超过此值，会返回客户端错误信息。</td></tr> <tr><td>producer.type</td> <td>sync</td> <td>同步异步模式。async表示异步，sync表示同步。如果设置成异步模式，可以允许生产者以batch的形式push数据，这样会极大的提高broker性能，推荐设置为异步。</td></tr> <tr><td>serializer.class</td> <td>kafka.serializer.DefaultEncoder</td> <td>序列号类，.默认序列化成 byte[] 。</td></tr> <tr><td>key.serializer.class</td> <td></td> <td>Key的序列化类，默认同上。</td></tr> <tr><td>partitioner.class</td> <td>kafka.producer.DefaultPartitioner</td> <td>Partition类，默认对key进行hash。</td></tr> <tr><td>compression.codec</td> <td>none</td> <td>指定producer消息的压缩格式，可选参数为： “none”, “gzip” and “snappy”。关于压缩参见4.1节</td></tr> <tr><td>compressed.topics</td> <td>null</td> <td>启用压缩的topic名称。若上面参数选择了一个压缩格式，那么压缩仅对本参数指定的topic有效，若本参数为空，则对所有topic有效。</td></tr> <tr><td>message.send.max.retries</td> <td>3</td> <td>Producer发送失败时重试次数。若网络出现问题，可能会导致不断重试。</td></tr> <tr><td>retry.backoff.ms</td> <td>100</td> <td>Before each retry, the producer refreshes the metadata of relevant topics to see if a new leader has been elected. Since leader election takes a bit of time, this property specifies the amount of time that the producer waits before refreshing the metadata.</td></tr> <tr><td>topic.metadata.refresh.interval.ms</td> <td>600 * 1000</td> <td>The producer generally refreshes the topic metadata from brokers when there is a failure (partition missing, leader not available…). It will also poll regularly (default: every 10min so 600000ms). If you set this to a negative value, metadata will only get refreshed on failure. If you set this to zero, the metadata will get refreshed after each message sent (not recommended). Important note: the refresh happen only AFTER the message is sent, so if the producer never sends a message the metadata is never refreshed</td></tr> <tr><td>queue.buffering.max.ms</td> <td>5000</td> <td>启用异步模式时，producer缓存消息的时间。比如我们设置成1000时，它会缓存1秒的数据再一次发送出去，这样可以极大的增加broker吞吐量，但也会造成时效性的降低。</td></tr> <tr><td>queue.buffering.max.messages</td> <td>10000</td> <td>采用异步模式时producer buffer 队列里最大缓存的消息数量，如果超过这个数值，producer就会阻塞或者丢掉消息。</td></tr> <tr><td>queue.enqueue.timeout.ms</td> <td>-1</td> <td>当达到上面参数值时producer阻塞等待的时间。如果值设置为0，buffer队列满时producer不会阻塞，消息直接被丢掉。若值设置为-1，producer会被阻塞，不会丢消息。</td></tr> <tr><td>batch.num.messages</td> <td>200</td> <td>采用异步模式时，一个batch缓存的消息数量。达到这个数量值时producer才会发送消息。</td></tr> <tr><td>send.buffer.bytes</td> <td>100 * 1024</td> <td>Socket write buffer size</td></tr> <tr><td>client.id</td> <td>“”</td> <td>The client id is a user-specified string sent in each request to help trace calls. It should logically identify the application making the request.</td></tr></tbody></table> <h3 id="consumer-配置信息"><a href="#consumer-配置信息" class="header-anchor">#</a> Consumer 配置信息</h3> <table><thead><tr><th><em><strong>*属性*</strong></em></th> <th><em><strong>*默认值*</strong></em></th> <th><em><strong>*描述*</strong></em></th></tr></thead> <tbody><tr><td>group.id</td> <td></td> <td>Consumer的组ID，相同goup.id的consumer属于同一个组。</td></tr> <tr><td>zookeeper.connect</td> <td></td> <td>Consumer的zookeeper连接串，要和broker的配置一致。</td></tr> <tr><td>consumer.id</td> <td>null</td> <td>如果不设置会自动生成。</td></tr> <tr><td>socket.timeout.ms</td> <td>30 * 1000</td> <td>网络请求的socket超时时间。实际超时时间由max.fetch.wait + socket.timeout.ms 确定。</td></tr> <tr><td>socket.receive.buffer.bytes</td> <td>64 * 1024</td> <td>The socket receive buffer for network requests.</td></tr> <tr><td>fetch.message.max.bytes</td> <td>1024 * 1024</td> <td>查询topic-partition时允许的最大消息大小。consumer会为每个partition缓存此大小的消息到内存，因此，这个参数可以控制consumer的内存使用量。这个值应该至少比server允许的最大消息大小大，以免producer发送的消息大于consumer允许的消息。</td></tr> <tr><td>num.consumer.fetchers</td> <td>1</td> <td>The number fetcher threads used to fetch data.</td></tr> <tr><td>auto.commit.enable</td> <td>true</td> <td>如果此值设置为true，consumer会周期性的把当前消费的offset值保存到zookeeper。当consumer失败重启之后将会使用此值作为新开始消费的值。</td></tr> <tr><td>auto.commit.interval.ms</td> <td>60 * 1000</td> <td>Consumer提交offset值到zookeeper的周期。</td></tr> <tr><td>queued.max.message.chunks</td> <td>2</td> <td>用来被consumer消费的message chunks 数量， 每个chunk可以缓存fetch.message.max.bytes大小的数据量。</td></tr> <tr><td>auto.commit.interval.ms</td> <td>60 * 1000</td> <td>Consumer提交offset值到zookeeper的周期。</td></tr> <tr><td>queued.max.message.chunks</td> <td>2</td> <td>用来被consumer消费的message chunks 数量， 每个chunk可以缓存fetch.message.max.bytes大小的数据量。</td></tr> <tr><td>fetch.min.bytes</td> <td>1</td> <td>The minimum amount of data the server should return for a fetch request. If insufficient data is available the request will wait for that much data to accumulate before answering the request.</td></tr> <tr><td>fetch.wait.max.ms</td> <td>100</td> <td>The maximum amount of time the server will block before answering the fetch request if there isn’t sufficient data to immediately satisfy fetch.min.bytes.</td></tr> <tr><td>rebalance.backoff.ms</td> <td>2000</td> <td>Backoff time between retries during rebalance.</td></tr> <tr><td>refresh.leader.backoff.ms</td> <td>200</td> <td>Backoff time to wait before trying to determine the leader of a partition that has just lost its leader.</td></tr> <tr><td>auto.offset.reset</td> <td>largest</td> <td>What to do when there is no initial offset in ZooKeeper or if an offset is out of range ;smallest : automatically reset the offset to the smallest offset; largest : automatically reset the offset to the largest offset;anything else: throw exception to the consumer</td></tr> <tr><td>consumer.timeout.ms</td> <td>-1</td> <td>若在指定时间内没有消息消费，consumer将会抛出异常。</td></tr> <tr><td>exclude.internal.topics</td> <td>true</td> <td>Whether messages from internal topics (such as offsets) should be exposed to the consumer.</td></tr> <tr><td>zookeeper.session.timeout.ms</td> <td>6000</td> <td>ZooKeeper session timeout. If the consumer fails to heartbeat to ZooKeeper for this period of time it is considered dead and a rebalance will occur.</td></tr> <tr><td>zookeeper.connection.timeout.ms</td> <td>6000</td> <td>The max time that the client waits while establishing a connection to zookeeper.</td></tr> <tr><td>zookeeper.sync.time.ms</td> <td>2000</td> <td>How far a ZK follower can be behind a ZK leader</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/21/2021, 1:25:38 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/消息队列/Kafka/6Streams.html" class="prev">
        Streams
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.4d60979a.js" defer></script><script src="/blog/assets/js/3.64b046d0.js" defer></script><script src="/blog/assets/js/170.7af88887.js" defer></script>
  </body>
</html>
